let mt,he,de,yt,pe,ue,bt,we,at,gt,cr,_e,Rt,ot,St,vt,fe,me,hr,it,ye,be,ge,Ct,Q,Re,Se,ve,dr,H,Ce,Z,Ae,$,Ee,Ie,xe,At,Et,It,Te,Pe,xt,Me,je,pr,Tt,Fe,Pt,He,De,Mt,ur,ze,B,g,jt,lt,Ft,Ht,Dt,zt,Nt,j,Bt,ct,ht,R,Ne,Be,Le,ke,Je,Lt,kt,Jt,Gt,Ge,h,Oe,Er,wr,mh=(async()=>{const Br=""+new URL("rapier_wasm3d_bg-6982ba4b.wasm",import.meta.url).href,Lr=async(a={},t)=>{let e;if(t.startsWith("data:")){const r=t.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(r,"base64");else if(typeof atob=="function"){const n=atob(r);i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(i,a)}else{const r=await fetch(t),i=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(r,a);else{const n=await r.arrayBuffer();e=await WebAssembly.instantiate(n,a)}}return e.instance.exports},C=new Array(32).fill(void 0);C.push(void 0,null,!0,!1);function A(a){return C[a]}let dt=C.length;function kr(a){a<36||(C[a]=dt,dt=a)}function Vt(a){const t=A(a);return kr(a),t}function F(a){dt===C.length&&C.push(C.length+1);const t=dt;return dt=C[t],C[t]=a,t}function f(a){return a==null}let Ve=new Float64Array;function Wt(){return Ve.byteLength===0&&(Ve=new Float64Array(nt.buffer)),Ve}let We=new Int32Array;function E(){return We.byteLength===0&&(We=new Int32Array(nt.buffer)),We}const Jr=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let fr=new Jr("utf-8",{ignoreBOM:!0,fatal:!0});fr.decode();let Ue=new Uint8Array;function Gr(){return Ue.byteLength===0&&(Ue=new Uint8Array(nt.buffer)),Ue}function mr(a,t){return fr.decode(Gr().subarray(a,a+t))}function Or(){try{const e=v(-16);ui(e);var a=E()[e/4+0],t=E()[e/4+1];return mr(a,t)}finally{v(16),oe(a,t)}}function l(a,t){if(!(a instanceof t))throw new Error(`expected instance of ${t.name}`);return a.ptr}let Xe=new Float32Array;function q(){return Xe.byteLength===0&&(Xe=new Float32Array(nt.buffer)),Xe}let I=32;function T(a){if(I==1)throw new Error("out of js stack");return C[--I]=a,I}function yr(a,t){return q().subarray(a/4,a/4+t)}let qe=new Uint32Array;function br(){return qe.byteLength===0&&(qe=new Uint32Array(nt.buffer)),qe}function Vr(a,t){return br().subarray(a/4,a/4+t)}let z=0;function tt(a,t){const e=t(a.length*4);return q().set(a,e/4),z=a.length,e}function Ut(a,t){const e=t(a.length*4);return br().set(a,e/4),z=a.length,e}function Ke(a,t){try{return a.apply(this,t)}catch(e){wh(F(e))}}const Xt=Object.freeze({X:0,0:"X",Y:1,1:"Y",Z:2,2:"Z",AngX:3,3:"AngX",AngY:4,4:"AngY",AngZ:5,5:"AngZ"});class K{static __wrap(t){const e=Object.create(K.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();_a(t)}constructor(){const t=fa();return K.__wrap(t)}}class st{static __wrap(t){const e=Object.create(st.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Wi(t)}constructor(){const t=Ui();return st.__wrap(t)}}class pt{static __wrap(t){const e=Object.create(pt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Li(t)}constructor(){const t=ki();return pt.__wrap(t)}handle(){return ft(this.ptr)}translationApplied(){const t=Ji(this.ptr);return d.__wrap(t)}translationRemaining(){const t=Gi(this.ptr);return d.__wrap(t)}toi(){return et(this.ptr)}worldWitness1(){const t=ne(this.ptr);return d.__wrap(t)}worldWitness2(){const t=Oi(this.ptr);return d.__wrap(t)}worldNormal1(){const t=rr(this.ptr);return d.__wrap(t)}worldNormal2(){const t=Vi(this.ptr);return d.__wrap(t)}}class P{static __wrap(t){const e=Object.create(P.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();xo(t)}coTranslation(t){const e=ma(this.ptr,t);return d.__wrap(e)}coRotation(t){const e=ya(this.ptr,t);return S.__wrap(e)}coSetTranslation(t,e,r,i){ba(this.ptr,t,e,r,i)}coSetTranslationWrtParent(t,e,r,i){ga(this.ptr,t,e,r,i)}coSetRotation(t,e,r,i,n){Ra(this.ptr,t,e,r,i,n)}coSetRotationWrtParent(t,e,r,i,n){Sa(this.ptr,t,e,r,i,n)}coIsSensor(t){return va(this.ptr,t)!==0}coShapeType(t){return Ca(this.ptr,t)>>>0}coHalfspaceNormal(t){const e=Aa(this.ptr,t);return e===0?void 0:d.__wrap(e)}coHalfExtents(t){const e=Ea(this.ptr,t);return e===0?void 0:d.__wrap(e)}coSetHalfExtents(t,e){l(e,d),Ia(this.ptr,t,e.ptr)}coRadius(t){try{const i=v(-16);xa(i,this.ptr,t);var e=E()[i/4+0],r=q()[i/4+1];return e===0?void 0:r}finally{v(16)}}coSetRadius(t,e){Ta(this.ptr,t,e)}coHalfHeight(t){try{const i=v(-16);Pa(i,this.ptr,t);var e=E()[i/4+0],r=q()[i/4+1];return e===0?void 0:r}finally{v(16)}}coSetHalfHeight(t,e){Ma(this.ptr,t,e)}coRoundRadius(t){try{const i=v(-16);ja(i,this.ptr,t);var e=E()[i/4+0],r=q()[i/4+1];return e===0?void 0:r}finally{v(16)}}coSetRoundRadius(t,e){Fa(this.ptr,t,e)}coVertices(t){try{const i=v(-16);Ha(i,this.ptr,t);var e=E()[i/4+0],r=E()[i/4+1];let n;return e!==0&&(n=yr(e,r).slice(),oe(e,r*4)),n}finally{v(16)}}coIndices(t){try{const i=v(-16);Da(i,this.ptr,t);var e=E()[i/4+0],r=E()[i/4+1];let n;return e!==0&&(n=Vr(e,r).slice(),oe(e,r*4)),n}finally{v(16)}}coHeightfieldHeights(t){try{const i=v(-16);za(i,this.ptr,t);var e=E()[i/4+0],r=E()[i/4+1];let n;return e!==0&&(n=yr(e,r).slice(),oe(e,r*4)),n}finally{v(16)}}coHeightfieldScale(t){const e=Na(this.ptr,t);return e===0?void 0:d.__wrap(e)}coHeightfieldNRows(t){try{const i=v(-16);Ba(i,this.ptr,t);var e=E()[i/4+0],r=E()[i/4+1];return e===0?void 0:r>>>0}finally{v(16)}}coHeightfieldNCols(t){try{const i=v(-16);La(i,this.ptr,t);var e=E()[i/4+0],r=E()[i/4+1];return e===0?void 0:r>>>0}finally{v(16)}}coParent(t){try{const i=v(-16);ka(i,this.ptr,t);var e=E()[i/4+0],r=Wt()[i/8+1];return e===0?void 0:r}finally{v(16)}}coSetEnabled(t,e){Ja(this.ptr,t,e)}coIsEnabled(t){return Ga(this.ptr,t)!==0}coFriction(t){return Oa(this.ptr,t)}coRestitution(t){return Va(this.ptr,t)}coDensity(t){return Wa(this.ptr,t)}coMass(t){return Ua(this.ptr,t)}coVolume(t){return Xa(this.ptr,t)}coCollisionGroups(t){return qa(this.ptr,t)>>>0}coSolverGroups(t){return Ka(this.ptr,t)>>>0}coActiveHooks(t){return Ya(this.ptr,t)>>>0}coActiveCollisionTypes(t){return Qa(this.ptr,t)}coActiveEvents(t){return Za(this.ptr,t)>>>0}coContactForceEventThreshold(t){return $a(this.ptr,t)}coContainsPoint(t,e){return l(e,d),to(this.ptr,t,e.ptr)!==0}coCastShape(t,e,r,i,n,o,c,p){l(e,d),l(r,y),l(i,d),l(n,S),l(o,d);const u=eo(this.ptr,t,e.ptr,r.ptr,i.ptr,n.ptr,o.ptr,c,p);return u===0?void 0:ie.__wrap(u)}coCastCollider(t,e,r,i,n,o){l(e,d),l(i,d);const c=ro(this.ptr,t,e.ptr,r,i.ptr,n,o);return c===0?void 0:re.__wrap(c)}coIntersectsShape(t,e,r,i){return l(e,y),l(r,d),l(i,S),io(this.ptr,t,e.ptr,r.ptr,i.ptr)!==0}coContactShape(t,e,r,i,n){l(e,y),l(r,d),l(i,S);const o=so(this.ptr,t,e.ptr,r.ptr,i.ptr,n);return o===0?void 0:_t.__wrap(o)}coContactCollider(t,e,r){const i=no(this.ptr,t,e,r);return i===0?void 0:_t.__wrap(i)}coProjectPoint(t,e,r){l(e,d);const i=ao(this.ptr,t,e.ptr,r);return Zt.__wrap(i)}coIntersectsRay(t,e,r,i){return l(e,d),l(r,d),oo(this.ptr,t,e.ptr,r.ptr,i)!==0}coCastRay(t,e,r,i,n){return l(e,d),l(r,d),lo(this.ptr,t,e.ptr,r.ptr,i,n)}coCastRayAndGetNormal(t,e,r,i,n){l(e,d),l(r,d);const o=co(this.ptr,t,e.ptr,r.ptr,i,n);return o===0?void 0:te.__wrap(o)}coSetSensor(t,e){ho(this.ptr,t,e)}coSetRestitution(t,e){po(this.ptr,t,e)}coSetFriction(t,e){uo(this.ptr,t,e)}coFrictionCombineRule(t){return wo(this.ptr,t)>>>0}coSetFrictionCombineRule(t,e){_o(this.ptr,t,e)}coRestitutionCombineRule(t){return fo(this.ptr,t)>>>0}coSetRestitutionCombineRule(t,e){mo(this.ptr,t,e)}coSetCollisionGroups(t,e){yo(this.ptr,t,e)}coSetSolverGroups(t,e){bo(this.ptr,t,e)}coSetActiveHooks(t,e){go(this.ptr,t,e)}coSetActiveEvents(t,e){Ro(this.ptr,t,e)}coSetActiveCollisionTypes(t,e){So(this.ptr,t,e)}coSetShape(t,e){l(e,y),vo(this.ptr,t,e.ptr)}coSetContactForceEventThreshold(t,e){Co(this.ptr,t,e)}coSetDensity(t,e){Ao(this.ptr,t,e)}coSetMass(t,e){Eo(this.ptr,t,e)}coSetMassProperties(t,e,r,i,n){l(r,d),l(i,d),l(n,S),Io(this.ptr,t,e,r.ptr,i.ptr,n.ptr)}constructor(){const t=To();return P.__wrap(t)}len(){return Po(this.ptr)>>>0}contains(t){return Sr(this.ptr,t)!==0}createCollider(t,e,r,i,n,o,c,p,u,w,_,m,b,x,k,W,U,rt,ir,sr,nr,ar,or,ce){try{const lr=v(-16);l(e,y),l(r,d),l(i,S),l(c,d),l(p,d),l(u,S),l(ce,M),Mo(lr,this.ptr,t,e.ptr,r.ptr,i.ptr,n,o,c.ptr,p.ptr,u.ptr,w,_,m,b,x,k,W,U,rt,ir,sr,nr,ar,or,ce.ptr);var _h=E()[lr/4+0],fh=Wt()[lr/8+1];return _h===0?void 0:fh}finally{v(16)}}remove(t,e,r,i){l(e,G),l(r,M),jo(this.ptr,t,e.ptr,r.ptr,i)}isHandleValid(t){return Sr(this.ptr,t)!==0}forEachColliderHandle(t){try{Fo(this.ptr,T(t))}finally{C[I++]=void 0}}}class Ye{static __wrap(t){const e=Object.create(Ye.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Cc(t)}collider1(){return ft(this.ptr)}collider2(){return Ac(this.ptr)}total_force(){const t=Ar(this.ptr);return d.__wrap(t)}total_force_magnitude(){return Ec(this.ptr)}max_force_direction(){const t=Ic(this.ptr);return d.__wrap(t)}max_force_magnitude(){return xc(this.ptr)}}class Qe{static __wrap(t){const e=Object.create(Qe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Go(t)}normal(){const t=Xo(this.ptr);return d.__wrap(t)}local_n1(){const t=qo(this.ptr);return d.__wrap(t)}local_n2(){const t=Ko(this.ptr);return d.__wrap(t)}subshape1(){return Yo(this.ptr)>>>0}subshape2(){return Qo(this.ptr)>>>0}num_contacts(){return Zo(this.ptr)>>>0}contact_local_p1(t){const e=$o(this.ptr,t);return e===0?void 0:d.__wrap(e)}contact_local_p2(t){const e=tl(this.ptr,t);return e===0?void 0:d.__wrap(e)}contact_dist(t){return el(this.ptr,t)}contact_fid1(t){return rl(this.ptr,t)>>>0}contact_fid2(t){return il(this.ptr,t)>>>0}contact_impulse(t){return sl(this.ptr,t)}contact_tangent_impulse_x(t){return nl(this.ptr,t)}contact_tangent_impulse_y(t){return al(this.ptr,t)}num_solver_contacts(){return ol(this.ptr)>>>0}solver_contact_point(t){const e=ll(this.ptr,t);return e===0?void 0:d.__wrap(e)}solver_contact_dist(t){return cl(this.ptr,t)}solver_contact_friction(t){return hl(this.ptr,t)}solver_contact_restitution(t){return dl(this.ptr,t)}solver_contact_tangent_velocity(t){const e=pl(this.ptr,t);return d.__wrap(e)}}class Ze{static __wrap(t){const e=Object.create(Ze.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();lh(t)}collider1(){return Oo(this.ptr)}collider2(){return Vo(this.ptr)}numContactManifolds(){return Wo(this.ptr)>>>0}contactManifold(t){const e=Uo(this.ptr,t);return e===0?void 0:Qe.__wrap(e)}}class qt{static __wrap(t){const e=Object.create(qt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();yc(t)}constructor(){const t=bc();return qt.__wrap(t)}vertices(){const t=gc(this.ptr);return Vt(t)}colors(){const t=Rc(this.ptr);return Vt(t)}render(t,e,r,i,n){l(t,M),l(e,P),l(r,J),l(i,O),l(n,V),Sc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr)}}class $e{static __wrap(t){const e=Object.create($e.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Yc(t)}takeGravity(){const t=Qc(this.ptr);return t===0?void 0:d.__wrap(t)}takeIntegrationParameters(){const t=Zc(this.ptr);return t===0?void 0:Y.__wrap(t)}takeIslandManager(){const t=$c(this.ptr);return t===0?void 0:G.__wrap(t)}takeBroadPhase(){const t=th(this.ptr);return t===0?void 0:K.__wrap(t)}takeNarrowPhase(){const t=eh(this.ptr);return t===0?void 0:V.__wrap(t)}takeBodies(){const t=rh(this.ptr);return t===0?void 0:M.__wrap(t)}takeColliders(){const t=ih(this.ptr);return t===0?void 0:P.__wrap(t)}takeImpulseJoints(){const t=sh(this.ptr);return t===0?void 0:J.__wrap(t)}takeMultibodyJoints(){const t=nh(this.ptr);return t===0?void 0:O.__wrap(t)}}class ut{static __wrap(t){const e=Object.create(ut.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();vc(t)}constructor(t){const e=Tc(t);return ut.__wrap(e)}drainCollisionEvents(t){try{Pc(this.ptr,T(t))}finally{C[I++]=void 0}}drainContactForceEvents(t){try{Mc(this.ptr,T(t))}finally{C[I++]=void 0}}clear(){jc(this.ptr)}}class N{static __wrap(t){const e=Object.create(N.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Ls(t)}static spherical(t,e){l(t,d),l(e,d);const r=ks(t.ptr,e.ptr);return N.__wrap(r)}static prismatic(t,e,r,i,n,o){l(t,d),l(e,d),l(r,d);const c=Js(t.ptr,e.ptr,r.ptr,i,n,o);return c===0?void 0:N.__wrap(c)}static fixed(t,e,r,i){l(t,d),l(e,S),l(r,d),l(i,S);const n=Gs(t.ptr,e.ptr,r.ptr,i.ptr);return N.__wrap(n)}static revolute(t,e,r){l(t,d),l(e,d),l(r,d);const i=Os(t.ptr,e.ptr,r.ptr);return i===0?void 0:N.__wrap(i)}}class J{static __wrap(t){const e=Object.create(J.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ps(t)}jointType(t){return Xi(this.ptr,t)>>>0}jointBodyHandle1(t){return qi(this.ptr,t)}jointBodyHandle2(t){return Ki(this.ptr,t)}jointFrameX1(t){const e=Yi(this.ptr,t);return S.__wrap(e)}jointFrameX2(t){const e=Qi(this.ptr,t);return S.__wrap(e)}jointAnchor1(t){const e=Zi(this.ptr,t);return d.__wrap(e)}jointAnchor2(t){const e=$i(this.ptr,t);return d.__wrap(e)}jointSetAnchor1(t,e){l(e,d),ts(this.ptr,t,e.ptr)}jointSetAnchor2(t,e){l(e,d),es(this.ptr,t,e.ptr)}jointContactsEnabled(t){return rs(this.ptr,t)!==0}jointSetContactsEnabled(t,e){is(this.ptr,t,e)}jointLimitsEnabled(t,e){return ss(this.ptr,t,e)!==0}jointLimitsMin(t,e){return ns(this.ptr,t,e)}jointLimitsMax(t,e){return as(this.ptr,t,e)}jointSetLimits(t,e,r,i){os(this.ptr,t,e,r,i)}jointConfigureMotorModel(t,e,r){ls(this.ptr,t,e,r)}jointConfigureMotorVelocity(t,e,r,i){cs(this.ptr,t,e,r,i)}jointConfigureMotorPosition(t,e,r,i,n){hs(this.ptr,t,e,r,i,n)}jointConfigureMotor(t,e,r,i,n,o){ds(this.ptr,t,e,r,i,n,o)}constructor(){const t=us();return J.__wrap(t)}createJoint(t,e,r,i){return l(t,N),ws(this.ptr,t.ptr,e,r,i)}remove(t,e){_s(this.ptr,t,e)}len(){return fs(this.ptr)>>>0}contains(t){return ms(this.ptr,t)!==0}forEachJointHandle(t){try{ys(this.ptr,T(t))}finally{C[I++]=void 0}}forEachJointAttachedToRigidBody(t,e){try{bs(this.ptr,t,T(e))}finally{C[I++]=void 0}}}class Y{static __wrap(t){const e=Object.create(Y.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();gs(t)}constructor(){const t=Rs();return Y.__wrap(t)}get dt(){return ae(this.ptr)}get erp(){return et(this.ptr)}get allowedLinearError(){return Ss(this.ptr)}get predictionDistance(){return vs(this.ptr)}get maxVelocityIterations(){return Cs(this.ptr)>>>0}get maxVelocityFrictionIterations(){return As(this.ptr)>>>0}get maxStabilizationIterations(){return Es(this.ptr)>>>0}get minIslandSize(){return Is(this.ptr)>>>0}get maxCcdSubsteps(){return xs(this.ptr)>>>0}set dt(t){gr(this.ptr,t)}set erp(t){Rr(this.ptr,t)}set allowedLinearError(t){Ts(this.ptr,t)}set predictionDistance(t){Ps(this.ptr,t)}set maxVelocityIterations(t){Ms(this.ptr,t)}set maxVelocityFrictionIterations(t){js(this.ptr,t)}set maxStabilizationIterations(t){Fs(this.ptr,t)}set minIslandSize(t){Hs(this.ptr,t)}set maxCcdSubsteps(t){Ds(this.ptr,t)}}class G{static __wrap(t){const e=Object.create(G.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();zs(t)}constructor(){const t=Ns();return G.__wrap(t)}forEachActiveRigidBodyHandle(t){try{Bs(this.ptr,T(t))}finally{C[I++]=void 0}}}class Kt{static __wrap(t){const e=Object.create(Kt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();wi(t)}constructor(t){const e=_i(t);return Kt.__wrap(e)}up(){const t=fi(this.ptr);return d.__wrap(t)}setUp(t){l(t,d),mi(this.ptr,t.ptr)}offset(){return yi(this.ptr)}setOffset(t){bi(this.ptr,t)}slideEnabled(){return gi(this.ptr)!==0}setSlideEnabled(t){Ri(this.ptr,t)}autostepMaxHeight(){try{const r=v(-16);Si(r,this.ptr);var t=E()[r/4+0],e=q()[r/4+1];return t===0?void 0:e}finally{v(16)}}autostepMinWidth(){try{const r=v(-16);vi(r,this.ptr);var t=E()[r/4+0],e=q()[r/4+1];return t===0?void 0:e}finally{v(16)}}autostepIncludesDynamicBodies(){const t=Ci(this.ptr);return t===16777215?void 0:t!==0}autostepEnabled(){return Ai(this.ptr)!==0}enableAutostep(t,e,r){Ei(this.ptr,t,e,r)}disableAutostep(){Ii(this.ptr)}maxSlopeClimbAngle(){return xi(this.ptr)}setMaxSlopeClimbAngle(t){Ti(this.ptr,t)}minSlopeSlideAngle(){return Pi(this.ptr)}setMinSlopeSlideAngle(t){Mi(this.ptr,t)}snapToGroundDistance(){try{const r=v(-16);ji(r,this.ptr);var t=E()[r/4+0],e=q()[r/4+1];return t===0?void 0:e}finally{v(16)}}enableSnapToGround(t){Fi(this.ptr,t)}disableSnapToGround(){Hi(this.ptr)}snapToGroundEnabled(){return Di(this.ptr)!==0}computeColliderMovement(t,e,r,i,n,o,c,p,u,w,_){try{l(e,M),l(r,P),l(i,wt),l(o,d),zi(this.ptr,t,e.ptr,r.ptr,i.ptr,n,o.ptr,c,!f(p),f(p)?0:p,u,!f(w),f(w)?0:w,T(_))}finally{C[I++]=void 0}}computedMovement(){const t=se(this.ptr);return d.__wrap(t)}computedGrounded(){return er(this.ptr)!==0}numComputedCollisions(){return Ni(this.ptr)>>>0}computedCollision(t,e){return l(e,pt),Bi(this.ptr,t,e.ptr)!==0}}class O{static __wrap(t){const e=Object.create(O.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();tn(t)}jointType(t){return Vs(this.ptr,t)>>>0}jointFrameX1(t){const e=Ws(this.ptr,t);return S.__wrap(e)}jointFrameX2(t){const e=Us(this.ptr,t);return S.__wrap(e)}jointAnchor1(t){const e=Xs(this.ptr,t);return d.__wrap(e)}jointAnchor2(t){const e=qs(this.ptr,t);return d.__wrap(e)}jointContactsEnabled(t){return Ks(this.ptr,t)!==0}jointSetContactsEnabled(t,e){Ys(this.ptr,t,e)}jointLimitsEnabled(t,e){return Qs(this.ptr,t,e)!==0}jointLimitsMin(t,e){return Zs(this.ptr,t,e)}jointLimitsMax(t,e){return $s(this.ptr,t,e)}constructor(){const t=en();return O.__wrap(t)}createJoint(t,e,r,i){return l(t,N),rn(this.ptr,t.ptr,e,r,i)}remove(t,e){sn(this.ptr,t,e)}contains(t){return nn(this.ptr,t)!==0}forEachJointHandle(t){try{an(this.ptr,T(t))}finally{C[I++]=void 0}}forEachJointAttachedToRigidBody(t,e){try{on(this.ptr,t,T(e))}finally{C[I++]=void 0}}}class V{static __wrap(t){const e=Object.create(V.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();zo(t)}constructor(){const t=No();return V.__wrap(t)}contacts_with(t,e){Bo(this.ptr,t,F(e))}contact_pair(t,e){const r=Lo(this.ptr,t,e);return r===0?void 0:Ze.__wrap(r)}intersections_with(t,e){ko(this.ptr,t,F(e))}intersection_pair(t,e){return Jo(this.ptr,t,e)!==0}}class Yt{static __wrap(t){const e=Object.create(Yt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Fc(t)}constructor(){const t=Hc();return Yt.__wrap(t)}step(t,e,r,i,n,o,c,p,u,w){l(t,d),l(e,Y),l(r,G),l(i,K),l(n,V),l(o,M),l(c,P),l(p,J),l(u,O),l(w,st),Dc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,o.ptr,c.ptr,p.ptr,u.ptr,w.ptr)}stepWithEvents(t,e,r,i,n,o,c,p,u,w,_,m,b,x){l(t,d),l(e,Y),l(r,G),l(i,K),l(n,V),l(o,M),l(c,P),l(p,J),l(u,O),l(w,st),l(_,ut),zc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,o.ptr,c.ptr,p.ptr,u.ptr,w.ptr,_.ptr,F(m),F(b),F(x))}}class Qt{static __wrap(t){const e=Object.create(Qt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();wl(t)}colliderHandle(){return _l(this.ptr)}point(){const t=se(this.ptr);return d.__wrap(t)}isInside(){return er(this.ptr)!==0}featureType(){return fl(this.ptr)>>>0}featureId(){try{const r=v(-16);ml(r,this.ptr);var t=E()[r/4+0],e=E()[r/4+1];return t===0?void 0:e>>>0}finally{v(16)}}}class Zt{static __wrap(t){const e=Object.create(Zt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ul(t)}point(){const t=se(this.ptr);return d.__wrap(t)}isInside(){return er(this.ptr)!==0}}class wt{static __wrap(t){const e=Object.create(wt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Nc(t)}constructor(){const t=Bc();return wt.__wrap(t)}update(t,e){l(t,M),l(e,P),Lc(this.ptr,t.ptr,e.ptr)}castRay(t,e,r,i,n,o,c,p,u,w,_){try{l(t,M),l(e,P),l(r,d),l(i,d);const m=kc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n,o,c,!f(p),f(p)?0:p,!f(u),f(u)?0:u,!f(w),f(w)?0:w,T(_));return m===0?void 0:tr.__wrap(m)}finally{C[I++]=void 0}}castRayAndGetNormal(t,e,r,i,n,o,c,p,u,w,_){try{l(t,M),l(e,P),l(r,d),l(i,d);const m=Jc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n,o,c,!f(p),f(p)?0:p,!f(u),f(u)?0:u,!f(w),f(w)?0:w,T(_));return m===0?void 0:$t.__wrap(m)}finally{C[I++]=void 0}}intersectionsWithRay(t,e,r,i,n,o,c,p,u,w,_,m){try{l(t,M),l(e,P),l(r,d),l(i,d),Gc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n,o,T(c),p,!f(u),f(u)?0:u,!f(w),f(w)?0:w,!f(_),f(_)?0:_,T(m))}finally{C[I++]=void 0,C[I++]=void 0}}intersectionWithShape(t,e,r,i,n,o,c,p,u,w){try{const b=v(-16);l(t,M),l(e,P),l(r,d),l(i,S),l(n,y),Oc(b,this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,o,!f(c),f(c)?0:c,!f(p),f(p)?0:p,!f(u),f(u)?0:u,T(w));var _=E()[b/4+0],m=Wt()[b/8+1];return _===0?void 0:m}finally{v(16),C[I++]=void 0}}projectPoint(t,e,r,i,n,o,c,p,u){try{l(t,M),l(e,P),l(r,d);const w=Vc(this.ptr,t.ptr,e.ptr,r.ptr,i,n,!f(o),f(o)?0:o,!f(c),f(c)?0:c,!f(p),f(p)?0:p,T(u));return w===0?void 0:Qt.__wrap(w)}finally{C[I++]=void 0}}projectPointAndGetFeature(t,e,r,i,n,o,c,p){try{l(t,M),l(e,P),l(r,d);const u=Wc(this.ptr,t.ptr,e.ptr,r.ptr,i,!f(n),f(n)?0:n,!f(o),f(o)?0:o,!f(c),f(c)?0:c,T(p));return u===0?void 0:Qt.__wrap(u)}finally{C[I++]=void 0}}intersectionsWithPoint(t,e,r,i,n,o,c,p,u){try{l(t,M),l(e,P),l(r,d),Uc(this.ptr,t.ptr,e.ptr,r.ptr,T(i),n,!f(o),f(o)?0:o,!f(c),f(c)?0:c,!f(p),f(p)?0:p,T(u))}finally{C[I++]=void 0,C[I++]=void 0}}castShape(t,e,r,i,n,o,c,p,u,w,_,m,b){try{l(t,M),l(e,P),l(r,d),l(i,S),l(n,d),l(o,y);const x=Xc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,o.ptr,c,p,u,!f(w),f(w)?0:w,!f(_),f(_)?0:_,!f(m),f(m)?0:m,T(b));return x===0?void 0:re.__wrap(x)}finally{C[I++]=void 0}}intersectionsWithShape(t,e,r,i,n,o,c,p,u,w,_){try{l(t,M),l(e,P),l(r,d),l(i,S),l(n,y),qc(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,T(o),c,!f(p),f(p)?0:p,!f(u),f(u)?0:u,!f(w),f(w)?0:w,T(_))}finally{C[I++]=void 0,C[I++]=void 0}}collidersWithAabbIntersectingAabb(t,e,r){try{l(t,d),l(e,d),Kc(this.ptr,t.ptr,e.ptr,T(r))}finally{C[I++]=void 0}}}class $t{static __wrap(t){const e=Object.create($t.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ch(t)}colliderHandle(){return ft(this.ptr)}normal(){const t=Rl(this.ptr);return d.__wrap(t)}toi(){return Sl(this.ptr)}featureType(){return vl(this.ptr)>>>0}featureId(){try{const r=v(-16);Cl(r,this.ptr);var t=E()[r/4+0],e=E()[r/4+1];return t===0?void 0:e>>>0}finally{v(16)}}}class tr{static __wrap(t){const e=Object.create(tr.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Al(t)}colliderHandle(){return ft(this.ptr)}toi(){return et(this.ptr)}}class te{static __wrap(t){const e=Object.create(te.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();yl(t)}normal(){const t=ne(this.ptr);return d.__wrap(t)}toi(){return et(this.ptr)}featureType(){return bl(this.ptr)>>>0}featureId(){try{const r=v(-16);gl(r,this.ptr);var t=E()[r/4+0],e=E()[r/4+1];return t===0?void 0:e>>>0}finally{v(16)}}}class M{static __wrap(t){const e=Object.create(M.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();oa(t)}rbTranslation(t){const e=ln(this.ptr,t);return d.__wrap(e)}rbRotation(t){const e=cn(this.ptr,t);return S.__wrap(e)}rbSleep(t){hn(this.ptr,t)}rbIsSleeping(t){return dn(this.ptr,t)!==0}rbIsMoving(t){return pn(this.ptr,t)!==0}rbNextTranslation(t){const e=un(this.ptr,t);return d.__wrap(e)}rbNextRotation(t){const e=wn(this.ptr,t);return S.__wrap(e)}rbSetTranslation(t,e,r,i,n){_n(this.ptr,t,e,r,i,n)}rbSetRotation(t,e,r,i,n,o){fn(this.ptr,t,e,r,i,n,o)}rbSetLinvel(t,e,r){l(e,d),mn(this.ptr,t,e.ptr,r)}rbSetAngvel(t,e,r){l(e,d),yn(this.ptr,t,e.ptr,r)}rbSetNextKinematicTranslation(t,e,r,i){bn(this.ptr,t,e,r,i)}rbSetNextKinematicRotation(t,e,r,i,n){gn(this.ptr,t,e,r,i,n)}rbRecomputeMassPropertiesFromColliders(t,e){l(e,P),Rn(this.ptr,t,e.ptr)}rbSetAdditionalMass(t,e,r){Sn(this.ptr,t,e,r)}rbSetAdditionalMassProperties(t,e,r,i,n,o){l(r,d),l(i,d),l(n,S),vn(this.ptr,t,e,r.ptr,i.ptr,n.ptr,o)}rbLinvel(t){const e=Cn(this.ptr,t);return d.__wrap(e)}rbAngvel(t){const e=An(this.ptr,t);return d.__wrap(e)}rbLockTranslations(t,e,r){En(this.ptr,t,e,r)}rbSetEnabledTranslations(t,e,r,i,n){In(this.ptr,t,e,r,i,n)}rbLockRotations(t,e,r){xn(this.ptr,t,e,r)}rbSetEnabledRotations(t,e,r,i,n){Tn(this.ptr,t,e,r,i,n)}rbDominanceGroup(t){return Pn(this.ptr,t)}rbSetDominanceGroup(t,e){Mn(this.ptr,t,e)}rbEnableCcd(t,e){jn(this.ptr,t,e)}rbMass(t){return Fn(this.ptr,t)}rbWakeUp(t){Hn(this.ptr,t)}rbIsCcdEnabled(t){return Dn(this.ptr,t)!==0}rbNumColliders(t){return zn(this.ptr,t)>>>0}rbCollider(t,e){return Nn(this.ptr,t,e)}rbBodyType(t){return Bn(this.ptr,t)>>>0}rbSetBodyType(t,e,r){Ln(this.ptr,t,e,r)}rbIsFixed(t){return kn(this.ptr,t)!==0}rbIsKinematic(t){return Jn(this.ptr,t)!==0}rbIsDynamic(t){return Gn(this.ptr,t)!==0}rbLinearDamping(t){return On(this.ptr,t)}rbAngularDamping(t){return Vn(this.ptr,t)}rbSetLinearDamping(t,e){Wn(this.ptr,t,e)}rbSetAngularDamping(t,e){Un(this.ptr,t,e)}rbSetEnabled(t,e){Xn(this.ptr,t,e)}rbIsEnabled(t){return qn(this.ptr,t)!==0}rbGravityScale(t){return Kn(this.ptr,t)}rbSetGravityScale(t,e,r){Yn(this.ptr,t,e,r)}rbResetForces(t,e){Qn(this.ptr,t,e)}rbResetTorques(t,e){Zn(this.ptr,t,e)}rbAddForce(t,e,r){l(e,d),$n(this.ptr,t,e.ptr,r)}rbApplyImpulse(t,e,r){l(e,d),ta(this.ptr,t,e.ptr,r)}rbAddTorque(t,e,r){l(e,d),ea(this.ptr,t,e.ptr,r)}rbApplyTorqueImpulse(t,e,r){l(e,d),ra(this.ptr,t,e.ptr,r)}rbAddForceAtPoint(t,e,r,i){l(e,d),l(r,d),ia(this.ptr,t,e.ptr,r.ptr,i)}rbApplyImpulseAtPoint(t,e,r,i){l(e,d),l(r,d),sa(this.ptr,t,e.ptr,r.ptr,i)}rbUserData(t){return na(this.ptr,t)>>>0}rbSetUserData(t,e){aa(this.ptr,t,e)}constructor(){const t=la();return M.__wrap(t)}createRigidBody(t,e,r,i,n,o,c,p,u,w,_,m,b,x,k,W,U,rt,ir,sr,nr,ar,or,ce){return l(e,d),l(r,S),l(c,d),l(p,d),l(u,d),l(w,d),l(_,S),ca(this.ptr,t,e.ptr,r.ptr,i,n,o,c.ptr,p.ptr,u.ptr,w.ptr,_.ptr,m,b,x,k,W,U,rt,ir,sr,nr,ar,or,ce)}remove(t,e,r,i,n){l(e,G),l(r,P),l(i,J),l(n,O),ha(this.ptr,t,e.ptr,r.ptr,i.ptr,n.ptr)}len(){return da(this.ptr)>>>0}contains(t){return pa(this.ptr,t)!==0}forEachRigidBodyHandle(t){try{ua(this.ptr,T(t))}finally{C[I++]=void 0}}propagateModifiedBodyPositionsToColliders(t){l(t,P),wa(this.ptr,t.ptr)}}class S{static __wrap(t){const e=Object.create(S.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();hh(t)}constructor(t,e,r,i){const n=ac(t,e,r,i);return S.__wrap(n)}static identity(){const t=oc();return S.__wrap(t)}get x(){return ae(this.ptr)}get y(){return Cr(this.ptr)}get z(){return et(this.ptr)}get w(){return lc(this.ptr)}}class ee{static __wrap(t){const e=Object.create(ee.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();uh(t)}constructor(){const t=ph();return ee.__wrap(t)}serializeAll(t,e,r,i,n,o,c,p,u){l(t,d),l(e,Y),l(r,G),l(i,K),l(n,V),l(o,M),l(c,P),l(p,J),l(u,O);const w=ah(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,o.ptr,c.ptr,p.ptr,u.ptr);return Vt(w)}deserializeAll(t){const e=oh(this.ptr,F(t));return e===0?void 0:$e.__wrap(e)}}class y{static __wrap(t){const e=Object.create(y.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();El(t)}static cuboid(t,e,r){const i=Il(t,e,r);return y.__wrap(i)}static roundCuboid(t,e,r,i){const n=xl(t,e,r,i);return y.__wrap(n)}static ball(t){const e=Tl(t);return y.__wrap(e)}static halfspace(t){l(t,d);const e=Pl(t.ptr);return y.__wrap(e)}static capsule(t,e){const r=Ml(t,e);return y.__wrap(r)}static cylinder(t,e){const r=jl(t,e);return y.__wrap(r)}static roundCylinder(t,e,r){const i=Fl(t,e,r);return y.__wrap(i)}static cone(t,e){const r=Hl(t,e);return y.__wrap(r)}static roundCone(t,e,r){const i=Dl(t,e,r);return y.__wrap(i)}static polyline(t,e){const r=tt(t,L),i=z,n=Ut(e,L),o=zl(r,i,n,z);return y.__wrap(o)}static trimesh(t,e){const r=tt(t,L),i=z,n=Ut(e,L),o=Nl(r,i,n,z);return y.__wrap(o)}static heightfield(t,e,r,i){const n=tt(r,L),o=z;l(i,d);const c=Bl(t,e,n,o,i.ptr);return y.__wrap(c)}static segment(t,e){l(t,d),l(e,d);const r=Ll(t.ptr,e.ptr);return y.__wrap(r)}static triangle(t,e,r){l(t,d),l(e,d),l(r,d);const i=kl(t.ptr,e.ptr,r.ptr);return y.__wrap(i)}static roundTriangle(t,e,r,i){l(t,d),l(e,d),l(r,d);const n=Jl(t.ptr,e.ptr,r.ptr,i);return y.__wrap(n)}static convexHull(t){const e=tt(t,L),r=Gl(e,z);return r===0?void 0:y.__wrap(r)}static roundConvexHull(t,e){const r=tt(t,L),i=Ol(r,z,e);return i===0?void 0:y.__wrap(i)}static convexMesh(t,e){const r=tt(t,L),i=z,n=Ut(e,L),o=Vl(r,i,n,z);return o===0?void 0:y.__wrap(o)}static roundConvexMesh(t,e,r){const i=tt(t,L),n=z,o=Ut(e,L),c=Wl(i,n,o,z,r);return c===0?void 0:y.__wrap(c)}castShape(t,e,r,i,n,o,c,p,u){l(t,d),l(e,S),l(r,d),l(i,y),l(n,d),l(o,S),l(c,d);const w=Ul(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,o.ptr,c.ptr,p,u);return w===0?void 0:ie.__wrap(w)}intersectsShape(t,e,r,i,n){return l(t,d),l(e,S),l(r,y),l(i,d),l(n,S),Xl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr)!==0}contactShape(t,e,r,i,n,o){l(t,d),l(e,S),l(r,y),l(i,d),l(n,S);const c=ql(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n.ptr,o);return c===0?void 0:_t.__wrap(c)}containsPoint(t,e,r){return l(t,d),l(e,S),l(r,d),Kl(this.ptr,t.ptr,e.ptr,r.ptr)!==0}projectPoint(t,e,r,i){l(t,d),l(e,S),l(r,d);const n=Yl(this.ptr,t.ptr,e.ptr,r.ptr,i);return Zt.__wrap(n)}intersectsRay(t,e,r,i,n){return l(t,d),l(e,S),l(r,d),l(i,d),Ql(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n)!==0}castRay(t,e,r,i,n,o){return l(t,d),l(e,S),l(r,d),l(i,d),Zl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n,o)}castRayAndGetNormal(t,e,r,i,n,o){l(t,d),l(e,S),l(r,d),l(i,d);const c=$l(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,n,o);return c===0?void 0:te.__wrap(c)}}class re{static __wrap(t){const e=Object.create(re.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();sc(t)}colliderHandle(){return ft(this.ptr)}toi(){return et(this.ptr)}witness1(){const t=ne(this.ptr);return d.__wrap(t)}witness2(){const t=vr(this.ptr);return d.__wrap(t)}normal1(){const t=rr(this.ptr);return d.__wrap(t)}normal2(){const t=nc(this.ptr);return d.__wrap(t)}}class _t{static __wrap(t){const e=Object.create(_t.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Ho(t)}distance(){return Do(this.ptr)}point1(){const t=se(this.ptr);return d.__wrap(t)}point2(){const t=ne(this.ptr);return d.__wrap(t)}normal1(){const t=vr(this.ptr);return d.__wrap(t)}normal2(){const t=rr(this.ptr);return d.__wrap(t)}}class ie{static __wrap(t){const e=Object.create(ie.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();tc(t)}toi(){return ae(this.ptr)}witness1(){const t=ec(this.ptr);return d.__wrap(t)}witness2(){const t=Ar(this.ptr);return d.__wrap(t)}normal1(){const t=rc(this.ptr);return d.__wrap(t)}normal2(){const t=ic(this.ptr);return d.__wrap(t)}}class d{static __wrap(t){const e=Object.create(d.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();dh(t)}static zero(){const t=cc();return d.__wrap(t)}constructor(t,e,r){const i=hc(t,e,r);return d.__wrap(i)}get x(){return ae(this.ptr)}set x(t){gr(this.ptr,t)}get y(){return Cr(this.ptr)}set y(t){dc(this.ptr,t)}get z(){return et(this.ptr)}set z(t){Rr(this.ptr,t)}xyz(){const t=pc(this.ptr);return d.__wrap(t)}yxz(){const t=uc(this.ptr);return d.__wrap(t)}zxy(){const t=wc(this.ptr);return d.__wrap(t)}xzy(){const t=_c(this.ptr);return d.__wrap(t)}yzx(){const t=fc(this.ptr);return d.__wrap(t)}zyx(){const t=mc(this.ptr);return d.__wrap(t)}}function Wr(a){Vt(a)}function Ur(a){return F(a)}function Xr(a,t){const e=A(t),r=typeof e=="number"?e:void 0;Wt()[a/8+1]=f(r)?0:r,E()[a/4+0]=!f(r)}function qr(a){const t=A(a);return typeof t=="boolean"?t?1:0:2}function Kr(a){return typeof A(a)=="function"}function Yr(a){const t=$t.__wrap(a);return F(t)}function Qr(a){const t=Ye.__wrap(a);return F(t)}function Zr(){return Ke(function(a,t,e){const r=A(a).call(A(t),A(e));return F(r)},arguments)}function $r(){return Ke(function(a,t,e,r){const i=A(a).call(A(t),A(e),A(r));return F(i)},arguments)}function ti(){return Ke(function(a,t,e,r,i){const n=A(a).call(A(t),A(e),A(r),A(i));return F(n)},arguments)}function ei(a,t,e,r){const i=A(a).bind(A(t),A(e),A(r));return F(i)}function ri(a){const t=A(a).buffer;return F(t)}function ii(a,t,e){const r=new Uint8Array(A(a),t>>>0,e>>>0);return F(r)}function si(a){const t=new Uint8Array(A(a));return F(t)}function ni(a,t,e){A(a).set(A(t),e>>>0)}function ai(a){return A(a).length}function oi(a,t,e){const r=new Float32Array(A(a),t>>>0,e>>>0);return F(r)}function li(a,t,e){A(a).set(A(t),e>>>0)}function ci(a){return A(a).length}function hi(a){const t=new Float32Array(a>>>0);return F(t)}function di(a,t){throw new Error(mr(a,t))}function pi(){return F(nt)}URL=globalThis.URL;const s=await Lr({"./rapier_wasm3d_bg.js":{__wbindgen_object_drop_ref:Wr,__wbindgen_number_new:Ur,__wbindgen_number_get:Xr,__wbindgen_boolean_get:qr,__wbindgen_is_function:Kr,__wbg_rawraycolliderintersection_new:Yr,__wbg_rawcontactforceevent_new:Qr,__wbg_call_168da88779e35f61:Zr,__wbg_call_3999bee59e9f7719:$r,__wbg_call_e1f72c051cdab859:ti,__wbg_bind_10dfe70e95d2a480:ei,__wbg_buffer_3f3d764d4747d564:ri,__wbg_newwithbyteoffsetandlength_d9aa266703cb98be:ii,__wbg_new_8c3f0052272a457a:si,__wbg_set_83db9690f9353e79:ni,__wbg_length_9e1ae1900cb0fbd5:ai,__wbg_newwithbyteoffsetandlength_be22e5fcf4f69ab4:oi,__wbg_set_0e0314cf6675c1b9:li,__wbg_length_9a2deed95d22668d:ci,__wbg_newwithlength_a7168e4a1e8f5e12:hi,__wbindgen_throw:di,__wbindgen_memory:pi}},Br),nt=s.memory,ui=s.version,wi=s.__wbg_rawkinematiccharactercontroller_free,_i=s.rawkinematiccharactercontroller_new,fi=s.rawkinematiccharactercontroller_up,mi=s.rawkinematiccharactercontroller_setUp,yi=s.rawkinematiccharactercontroller_offset,bi=s.rawkinematiccharactercontroller_setOffset,gi=s.rawkinematiccharactercontroller_slideEnabled,Ri=s.rawkinematiccharactercontroller_setSlideEnabled,Si=s.rawkinematiccharactercontroller_autostepMaxHeight,vi=s.rawkinematiccharactercontroller_autostepMinWidth,Ci=s.rawkinematiccharactercontroller_autostepIncludesDynamicBodies,Ai=s.rawkinematiccharactercontroller_autostepEnabled,Ei=s.rawkinematiccharactercontroller_enableAutostep,Ii=s.rawkinematiccharactercontroller_disableAutostep,xi=s.rawkinematiccharactercontroller_maxSlopeClimbAngle,Ti=s.rawkinematiccharactercontroller_setMaxSlopeClimbAngle,Pi=s.rawkinematiccharactercontroller_minSlopeSlideAngle,Mi=s.rawkinematiccharactercontroller_setMinSlopeSlideAngle,ji=s.rawkinematiccharactercontroller_snapToGroundDistance,Fi=s.rawkinematiccharactercontroller_enableSnapToGround,Hi=s.rawkinematiccharactercontroller_disableSnapToGround,Di=s.rawkinematiccharactercontroller_snapToGroundEnabled,zi=s.rawkinematiccharactercontroller_computeColliderMovement,se=s.rawkinematiccharactercontroller_computedMovement,er=s.rawkinematiccharactercontroller_computedGrounded,Ni=s.rawkinematiccharactercontroller_numComputedCollisions,Bi=s.rawkinematiccharactercontroller_computedCollision,Li=s.__wbg_rawcharactercollision_free,ki=s.rawcharactercollision_new,ft=s.rawcharactercollision_handle,Ji=s.rawcharactercollision_translationApplied,Gi=s.rawcharactercollision_translationRemaining,et=s.rawcharactercollision_toi,ne=s.rawcharactercollision_worldWitness1,Oi=s.rawcharactercollision_worldWitness2,rr=s.rawcharactercollision_worldNormal1,Vi=s.rawcharactercollision_worldNormal2,Wi=s.__wbg_rawccdsolver_free,Ui=s.rawccdsolver_new,Xi=s.rawimpulsejointset_jointType,qi=s.rawimpulsejointset_jointBodyHandle1,Ki=s.rawimpulsejointset_jointBodyHandle2,Yi=s.rawimpulsejointset_jointFrameX1,Qi=s.rawimpulsejointset_jointFrameX2,Zi=s.rawimpulsejointset_jointAnchor1,$i=s.rawimpulsejointset_jointAnchor2,ts=s.rawimpulsejointset_jointSetAnchor1,es=s.rawimpulsejointset_jointSetAnchor2,rs=s.rawimpulsejointset_jointContactsEnabled,is=s.rawimpulsejointset_jointSetContactsEnabled,ss=s.rawimpulsejointset_jointLimitsEnabled,ns=s.rawimpulsejointset_jointLimitsMin,as=s.rawimpulsejointset_jointLimitsMax,os=s.rawimpulsejointset_jointSetLimits,ls=s.rawimpulsejointset_jointConfigureMotorModel,cs=s.rawimpulsejointset_jointConfigureMotorVelocity,hs=s.rawimpulsejointset_jointConfigureMotorPosition,ds=s.rawimpulsejointset_jointConfigureMotor,ps=s.__wbg_rawimpulsejointset_free,us=s.rawimpulsejointset_new,ws=s.rawimpulsejointset_createJoint,_s=s.rawimpulsejointset_remove,fs=s.rawimpulsejointset_len,ms=s.rawimpulsejointset_contains,ys=s.rawimpulsejointset_forEachJointHandle,bs=s.rawimpulsejointset_forEachJointAttachedToRigidBody,gs=s.__wbg_rawintegrationparameters_free,Rs=s.rawintegrationparameters_new,ae=s.rawintegrationparameters_dt,Ss=s.rawintegrationparameters_allowedLinearError,vs=s.rawintegrationparameters_predictionDistance,Cs=s.rawintegrationparameters_maxVelocityIterations,As=s.rawintegrationparameters_maxVelocityFrictionIterations,Es=s.rawintegrationparameters_maxStabilizationIterations,Is=s.rawintegrationparameters_minIslandSize,xs=s.rawintegrationparameters_maxCcdSubsteps,gr=s.rawintegrationparameters_set_dt,Rr=s.rawintegrationparameters_set_erp,Ts=s.rawintegrationparameters_set_allowedLinearError,Ps=s.rawintegrationparameters_set_predictionDistance,Ms=s.rawintegrationparameters_set_maxVelocityIterations,js=s.rawintegrationparameters_set_maxVelocityFrictionIterations,Fs=s.rawintegrationparameters_set_maxStabilizationIterations,Hs=s.rawintegrationparameters_set_minIslandSize,Ds=s.rawintegrationparameters_set_maxCcdSubsteps,zs=s.__wbg_rawislandmanager_free,Ns=s.rawislandmanager_new,Bs=s.rawislandmanager_forEachActiveRigidBodyHandle,Ls=s.__wbg_rawgenericjoint_free,ks=s.rawgenericjoint_spherical,Js=s.rawgenericjoint_prismatic,Gs=s.rawgenericjoint_fixed,Os=s.rawgenericjoint_revolute,Vs=s.rawmultibodyjointset_jointType,Ws=s.rawmultibodyjointset_jointFrameX1,Us=s.rawmultibodyjointset_jointFrameX2,Xs=s.rawmultibodyjointset_jointAnchor1,qs=s.rawmultibodyjointset_jointAnchor2,Ks=s.rawmultibodyjointset_jointContactsEnabled,Ys=s.rawmultibodyjointset_jointSetContactsEnabled,Qs=s.rawmultibodyjointset_jointLimitsEnabled,Zs=s.rawmultibodyjointset_jointLimitsMin,$s=s.rawmultibodyjointset_jointLimitsMax,tn=s.__wbg_rawmultibodyjointset_free,en=s.rawmultibodyjointset_new,rn=s.rawmultibodyjointset_createJoint,sn=s.rawmultibodyjointset_remove,nn=s.rawmultibodyjointset_contains,an=s.rawmultibodyjointset_forEachJointHandle,on=s.rawmultibodyjointset_forEachJointAttachedToRigidBody,ln=s.rawrigidbodyset_rbTranslation,cn=s.rawrigidbodyset_rbRotation,hn=s.rawrigidbodyset_rbSleep,dn=s.rawrigidbodyset_rbIsSleeping,pn=s.rawrigidbodyset_rbIsMoving,un=s.rawrigidbodyset_rbNextTranslation,wn=s.rawrigidbodyset_rbNextRotation,_n=s.rawrigidbodyset_rbSetTranslation,fn=s.rawrigidbodyset_rbSetRotation,mn=s.rawrigidbodyset_rbSetLinvel,yn=s.rawrigidbodyset_rbSetAngvel,bn=s.rawrigidbodyset_rbSetNextKinematicTranslation,gn=s.rawrigidbodyset_rbSetNextKinematicRotation,Rn=s.rawrigidbodyset_rbRecomputeMassPropertiesFromColliders,Sn=s.rawrigidbodyset_rbSetAdditionalMass,vn=s.rawrigidbodyset_rbSetAdditionalMassProperties,Cn=s.rawrigidbodyset_rbLinvel,An=s.rawrigidbodyset_rbAngvel,En=s.rawrigidbodyset_rbLockTranslations,In=s.rawrigidbodyset_rbSetEnabledTranslations,xn=s.rawrigidbodyset_rbLockRotations,Tn=s.rawrigidbodyset_rbSetEnabledRotations,Pn=s.rawrigidbodyset_rbDominanceGroup,Mn=s.rawrigidbodyset_rbSetDominanceGroup,jn=s.rawrigidbodyset_rbEnableCcd,Fn=s.rawrigidbodyset_rbMass,Hn=s.rawrigidbodyset_rbWakeUp,Dn=s.rawrigidbodyset_rbIsCcdEnabled,zn=s.rawrigidbodyset_rbNumColliders,Nn=s.rawrigidbodyset_rbCollider,Bn=s.rawrigidbodyset_rbBodyType,Ln=s.rawrigidbodyset_rbSetBodyType,kn=s.rawrigidbodyset_rbIsFixed,Jn=s.rawrigidbodyset_rbIsKinematic,Gn=s.rawrigidbodyset_rbIsDynamic,On=s.rawrigidbodyset_rbLinearDamping,Vn=s.rawrigidbodyset_rbAngularDamping,Wn=s.rawrigidbodyset_rbSetLinearDamping,Un=s.rawrigidbodyset_rbSetAngularDamping,Xn=s.rawrigidbodyset_rbSetEnabled,qn=s.rawrigidbodyset_rbIsEnabled,Kn=s.rawrigidbodyset_rbGravityScale,Yn=s.rawrigidbodyset_rbSetGravityScale,Qn=s.rawrigidbodyset_rbResetForces,Zn=s.rawrigidbodyset_rbResetTorques,$n=s.rawrigidbodyset_rbAddForce,ta=s.rawrigidbodyset_rbApplyImpulse,ea=s.rawrigidbodyset_rbAddTorque,ra=s.rawrigidbodyset_rbApplyTorqueImpulse,ia=s.rawrigidbodyset_rbAddForceAtPoint,sa=s.rawrigidbodyset_rbApplyImpulseAtPoint,na=s.rawrigidbodyset_rbUserData,aa=s.rawrigidbodyset_rbSetUserData,oa=s.__wbg_rawrigidbodyset_free,la=s.rawrigidbodyset_new,ca=s.rawrigidbodyset_createRigidBody,ha=s.rawrigidbodyset_remove,da=s.rawrigidbodyset_len,pa=s.rawrigidbodyset_contains,ua=s.rawrigidbodyset_forEachRigidBodyHandle,wa=s.rawrigidbodyset_propagateModifiedBodyPositionsToColliders,_a=s.__wbg_rawbroadphase_free,fa=s.rawbroadphase_new,ma=s.rawcolliderset_coTranslation,ya=s.rawcolliderset_coRotation,ba=s.rawcolliderset_coSetTranslation,ga=s.rawcolliderset_coSetTranslationWrtParent,Ra=s.rawcolliderset_coSetRotation,Sa=s.rawcolliderset_coSetRotationWrtParent,va=s.rawcolliderset_coIsSensor,Ca=s.rawcolliderset_coShapeType,Aa=s.rawcolliderset_coHalfspaceNormal,Ea=s.rawcolliderset_coHalfExtents,Ia=s.rawcolliderset_coSetHalfExtents,xa=s.rawcolliderset_coRadius,Ta=s.rawcolliderset_coSetRadius,Pa=s.rawcolliderset_coHalfHeight,Ma=s.rawcolliderset_coSetHalfHeight,ja=s.rawcolliderset_coRoundRadius,Fa=s.rawcolliderset_coSetRoundRadius,Ha=s.rawcolliderset_coVertices,Da=s.rawcolliderset_coIndices,za=s.rawcolliderset_coHeightfieldHeights,Na=s.rawcolliderset_coHeightfieldScale,Ba=s.rawcolliderset_coHeightfieldNRows,La=s.rawcolliderset_coHeightfieldNCols,ka=s.rawcolliderset_coParent,Ja=s.rawcolliderset_coSetEnabled,Ga=s.rawcolliderset_coIsEnabled,Oa=s.rawcolliderset_coFriction,Va=s.rawcolliderset_coRestitution,Wa=s.rawcolliderset_coDensity,Ua=s.rawcolliderset_coMass,Xa=s.rawcolliderset_coVolume,qa=s.rawcolliderset_coCollisionGroups,Ka=s.rawcolliderset_coSolverGroups,Ya=s.rawcolliderset_coActiveHooks,Qa=s.rawcolliderset_coActiveCollisionTypes,Za=s.rawcolliderset_coActiveEvents,$a=s.rawcolliderset_coContactForceEventThreshold,to=s.rawcolliderset_coContainsPoint,eo=s.rawcolliderset_coCastShape,ro=s.rawcolliderset_coCastCollider,io=s.rawcolliderset_coIntersectsShape,so=s.rawcolliderset_coContactShape,no=s.rawcolliderset_coContactCollider,ao=s.rawcolliderset_coProjectPoint,oo=s.rawcolliderset_coIntersectsRay,lo=s.rawcolliderset_coCastRay,co=s.rawcolliderset_coCastRayAndGetNormal,ho=s.rawcolliderset_coSetSensor,po=s.rawcolliderset_coSetRestitution,uo=s.rawcolliderset_coSetFriction,wo=s.rawcolliderset_coFrictionCombineRule,_o=s.rawcolliderset_coSetFrictionCombineRule,fo=s.rawcolliderset_coRestitutionCombineRule,mo=s.rawcolliderset_coSetRestitutionCombineRule,yo=s.rawcolliderset_coSetCollisionGroups,bo=s.rawcolliderset_coSetSolverGroups,go=s.rawcolliderset_coSetActiveHooks,Ro=s.rawcolliderset_coSetActiveEvents,So=s.rawcolliderset_coSetActiveCollisionTypes,vo=s.rawcolliderset_coSetShape,Co=s.rawcolliderset_coSetContactForceEventThreshold,Ao=s.rawcolliderset_coSetDensity,Eo=s.rawcolliderset_coSetMass,Io=s.rawcolliderset_coSetMassProperties,xo=s.__wbg_rawcolliderset_free,To=s.rawcolliderset_new,Po=s.rawcolliderset_len,Sr=s.rawcolliderset_contains,Mo=s.rawcolliderset_createCollider,jo=s.rawcolliderset_remove,Fo=s.rawcolliderset_forEachColliderHandle,Ho=s.__wbg_rawshapecontact_free,Do=s.rawshapecontact_distance,zo=s.__wbg_rawnarrowphase_free,No=s.rawnarrowphase_new,Bo=s.rawnarrowphase_contacts_with,Lo=s.rawnarrowphase_contact_pair,ko=s.rawnarrowphase_intersections_with,Jo=s.rawnarrowphase_intersection_pair,Go=s.__wbg_rawcontactmanifold_free,Oo=s.rawcontactpair_collider1,Vo=s.rawcontactpair_collider2,Wo=s.rawcontactpair_numContactManifolds,Uo=s.rawcontactpair_contactManifold,Xo=s.rawcontactmanifold_normal,qo=s.rawcontactmanifold_local_n1,Ko=s.rawcontactmanifold_local_n2,Yo=s.rawcontactmanifold_subshape1,Qo=s.rawcontactmanifold_subshape2,Zo=s.rawcontactmanifold_num_contacts,$o=s.rawcontactmanifold_contact_local_p1,tl=s.rawcontactmanifold_contact_local_p2,el=s.rawcontactmanifold_contact_dist,rl=s.rawcontactmanifold_contact_fid1,il=s.rawcontactmanifold_contact_fid2,sl=s.rawcontactmanifold_contact_impulse,nl=s.rawcontactmanifold_contact_tangent_impulse_x,al=s.rawcontactmanifold_contact_tangent_impulse_y,ol=s.rawcontactmanifold_num_solver_contacts,ll=s.rawcontactmanifold_solver_contact_point,cl=s.rawcontactmanifold_solver_contact_dist,hl=s.rawcontactmanifold_solver_contact_friction,dl=s.rawcontactmanifold_solver_contact_restitution,pl=s.rawcontactmanifold_solver_contact_tangent_velocity,ul=s.__wbg_rawpointprojection_free,wl=s.__wbg_rawpointcolliderprojection_free,_l=s.rawpointcolliderprojection_colliderHandle,fl=s.rawpointcolliderprojection_featureType,ml=s.rawpointcolliderprojection_featureId,yl=s.__wbg_rawrayintersection_free,bl=s.rawrayintersection_featureType,gl=s.rawrayintersection_featureId,Rl=s.rawraycolliderintersection_normal,Sl=s.rawraycolliderintersection_toi,vl=s.rawraycolliderintersection_featureType,Cl=s.rawraycolliderintersection_featureId,Al=s.__wbg_rawraycollidertoi_free,El=s.__wbg_rawshape_free,Il=s.rawshape_cuboid,xl=s.rawshape_roundCuboid,Tl=s.rawshape_ball,Pl=s.rawshape_halfspace,Ml=s.rawshape_capsule,jl=s.rawshape_cylinder,Fl=s.rawshape_roundCylinder,Hl=s.rawshape_cone,Dl=s.rawshape_roundCone,zl=s.rawshape_polyline,Nl=s.rawshape_trimesh,Bl=s.rawshape_heightfield,Ll=s.rawshape_segment,kl=s.rawshape_triangle,Jl=s.rawshape_roundTriangle,Gl=s.rawshape_convexHull,Ol=s.rawshape_roundConvexHull,Vl=s.rawshape_convexMesh,Wl=s.rawshape_roundConvexMesh,Ul=s.rawshape_castShape,Xl=s.rawshape_intersectsShape,ql=s.rawshape_contactShape,Kl=s.rawshape_containsPoint,Yl=s.rawshape_projectPoint,Ql=s.rawshape_intersectsRay,Zl=s.rawshape_castRay,$l=s.rawshape_castRayAndGetNormal,tc=s.__wbg_rawshapetoi_free,ec=s.rawshapetoi_witness1,rc=s.rawshapetoi_normal1,ic=s.rawshapetoi_normal2,sc=s.__wbg_rawshapecollidertoi_free,vr=s.rawshapecollidertoi_witness2,nc=s.rawshapecollidertoi_normal2,ac=s.rawrotation_new,oc=s.rawrotation_identity,Cr=s.rawrotation_y,lc=s.rawrotation_w,cc=s.rawvector_zero,hc=s.rawvector_new,dc=s.rawvector_set_y,pc=s.rawvector_xyz,uc=s.rawvector_yxz,wc=s.rawvector_zxy,_c=s.rawvector_xzy,fc=s.rawvector_yzx,mc=s.rawvector_zyx,yc=s.__wbg_rawdebugrenderpipeline_free,bc=s.rawdebugrenderpipeline_new,gc=s.rawdebugrenderpipeline_vertices,Rc=s.rawdebugrenderpipeline_colors,Sc=s.rawdebugrenderpipeline_render,vc=s.__wbg_raweventqueue_free,Cc=s.__wbg_rawcontactforceevent_free,Ac=s.rawcontactforceevent_collider2,Ar=s.rawcontactforceevent_total_force,Ec=s.rawcontactforceevent_total_force_magnitude,Ic=s.rawcontactforceevent_max_force_direction,xc=s.rawcontactforceevent_max_force_magnitude,Tc=s.raweventqueue_new,Pc=s.raweventqueue_drainCollisionEvents,Mc=s.raweventqueue_drainContactForceEvents,jc=s.raweventqueue_clear,Fc=s.__wbg_rawphysicspipeline_free,Hc=s.rawphysicspipeline_new,Dc=s.rawphysicspipeline_step,zc=s.rawphysicspipeline_stepWithEvents,Nc=s.__wbg_rawquerypipeline_free,Bc=s.rawquerypipeline_new,Lc=s.rawquerypipeline_update,kc=s.rawquerypipeline_castRay,Jc=s.rawquerypipeline_castRayAndGetNormal,Gc=s.rawquerypipeline_intersectionsWithRay,Oc=s.rawquerypipeline_intersectionWithShape,Vc=s.rawquerypipeline_projectPoint,Wc=s.rawquerypipeline_projectPointAndGetFeature,Uc=s.rawquerypipeline_intersectionsWithPoint,Xc=s.rawquerypipeline_castShape,qc=s.rawquerypipeline_intersectionsWithShape,Kc=s.rawquerypipeline_collidersWithAabbIntersectingAabb,Yc=s.__wbg_rawdeserializedworld_free,Qc=s.rawdeserializedworld_takeGravity,Zc=s.rawdeserializedworld_takeIntegrationParameters,$c=s.rawdeserializedworld_takeIslandManager,th=s.rawdeserializedworld_takeBroadPhase,eh=s.rawdeserializedworld_takeNarrowPhase,rh=s.rawdeserializedworld_takeBodies,ih=s.rawdeserializedworld_takeColliders,sh=s.rawdeserializedworld_takeImpulseJoints,nh=s.rawdeserializedworld_takeMultibodyJoints,ah=s.rawserializationpipeline_serializeAll,oh=s.rawserializationpipeline_deserializeAll,lh=s.__wbg_rawcontactpair_free,ch=s.__wbg_rawraycolliderintersection_free,hh=s.__wbg_rawrotation_free,dh=s.__wbg_rawvector_free;s.rawvector_set_x,s.rawvector_set_z,s.rawpointprojection_isInside,s.rawpointcolliderprojection_isInside,s.rawcolliderset_isHandleValid,s.rawshapecontact_point1,s.rawshapecontact_point2,s.rawshapecontact_normal2,s.rawpointprojection_point,s.rawpointcolliderprojection_point,s.rawrayintersection_normal,s.rawshapecollidertoi_witness1,s.rawshapecontact_normal1,s.rawshapecollidertoi_normal1,s.rawshapetoi_witness2;const ph=s.rawserializationpipeline_new;s.rawintegrationparameters_erp,s.rawrayintersection_toi,s.rawraycollidertoi_toi,s.rawshapetoi_toi,s.rawshapecollidertoi_toi,s.rawrotation_x,s.rawrotation_z,s.rawvector_x,s.rawvector_y,s.rawvector_z,s.rawraycolliderintersection_colliderHandle,s.rawraycollidertoi_colliderHandle,s.rawshapecollidertoi_colliderHandle,s.rawcontactforceevent_collider1;const uh=s.__wbg_rawserializationpipeline_free,v=s.__wbindgen_add_to_stack_pointer,oe=s.__wbindgen_free,L=s.__wbindgen_malloc,wh=s.__wbindgen_exn_store;Ge=class{constructor(t,e,r){this.x=t,this.y=e,this.z=r}},h=class _r{static new(t,e,r){return new Ge(t,e,r)}static intoRaw(t){return new d(t.x,t.y,t.z)}static zeros(){return _r.new(0,0,0)}static fromRaw(t){if(!t)return null;let e=_r.new(t.x,t.y,t.z);return t.free(),e}static copy(t,e){t.x=e.x,t.y=e.y,t.z=e.z}},xt=class{constructor(t,e,r,i){this.x=t,this.y=e,this.z=r,this.w=i}},g=class{static identity(){return new xt(0,0,0,1)}static fromRaw(t){if(!t)return null;let e=new xt(t.x,t.y,t.z,t.w);return t.free(),e}static intoRaw(t){return new S(t.x,t.y,t.z,t.w)}static copy(t,e){t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w}},function(a){a[a.Dynamic=0]="Dynamic",a[a.Fixed=1]="Fixed",a[a.KinematicPositionBased=2]="KinematicPositionBased",a[a.KinematicVelocityBased=3]="KinematicVelocityBased"}(B||(B={})),Mt=class{constructor(t,e,r){this.rawSet=t,this.colliderSet=e,this.handle=r}finalizeDeserialization(t){this.colliderSet=t}isValid(){return this.rawSet.contains(this.handle)}lockTranslations(t,e){return this.rawSet.rbLockTranslations(this.handle,t,e)}lockRotations(t,e){return this.rawSet.rbLockRotations(this.handle,t,e)}setEnabledTranslations(t,e,r,i){return this.rawSet.rbSetEnabledTranslations(this.handle,t,e,r,i)}restrictTranslations(t,e,r,i){this.setEnabledTranslations(t,e,r,i)}setEnabledRotations(t,e,r,i){return this.rawSet.rbSetEnabledRotations(this.handle,t,e,r,i)}restrictRotations(t,e,r,i){this.setEnabledRotations(t,e,r,i)}dominanceGroup(){return this.rawSet.rbDominanceGroup(this.handle)}setDominanceGroup(t){this.rawSet.rbSetDominanceGroup(this.handle,t)}enableCcd(t){this.rawSet.rbEnableCcd(this.handle,t)}translation(){let t=this.rawSet.rbTranslation(this.handle);return h.fromRaw(t)}rotation(){let t=this.rawSet.rbRotation(this.handle);return g.fromRaw(t)}nextTranslation(){let t=this.rawSet.rbNextTranslation(this.handle);return h.fromRaw(t)}nextRotation(){let t=this.rawSet.rbNextRotation(this.handle);return g.fromRaw(t)}setTranslation(t,e){this.rawSet.rbSetTranslation(this.handle,t.x,t.y,t.z,e)}setLinvel(t,e){let r=h.intoRaw(t);this.rawSet.rbSetLinvel(this.handle,r,e),r.free()}gravityScale(){return this.rawSet.rbGravityScale(this.handle)}setGravityScale(t,e){this.rawSet.rbSetGravityScale(this.handle,t,e)}setRotation(t,e){this.rawSet.rbSetRotation(this.handle,t.x,t.y,t.z,t.w,e)}setAngvel(t,e){let r=h.intoRaw(t);this.rawSet.rbSetAngvel(this.handle,r,e),r.free()}setNextKinematicTranslation(t){this.rawSet.rbSetNextKinematicTranslation(this.handle,t.x,t.y,t.z)}setNextKinematicRotation(t){this.rawSet.rbSetNextKinematicRotation(this.handle,t.x,t.y,t.z,t.w)}linvel(){return h.fromRaw(this.rawSet.rbLinvel(this.handle))}angvel(){return h.fromRaw(this.rawSet.rbAngvel(this.handle))}mass(){return this.rawSet.rbMass(this.handle)}sleep(){this.rawSet.rbSleep(this.handle)}wakeUp(){this.rawSet.rbWakeUp(this.handle)}isCcdEnabled(){return this.rawSet.rbIsCcdEnabled(this.handle)}numColliders(){return this.rawSet.rbNumColliders(this.handle)}collider(t){return this.colliderSet.get(this.rawSet.rbCollider(this.handle,t))}setEnabled(t){this.rawSet.rbSetEnabled(this.handle,t)}isEnabled(){return this.rawSet.rbIsEnabled(this.handle)}bodyType(){return this.rawSet.rbBodyType(this.handle)}setBodyType(t,e){return this.rawSet.rbSetBodyType(this.handle,t,e)}isSleeping(){return this.rawSet.rbIsSleeping(this.handle)}isMoving(){return this.rawSet.rbIsMoving(this.handle)}isFixed(){return this.rawSet.rbIsFixed(this.handle)}isKinematic(){return this.rawSet.rbIsKinematic(this.handle)}isDynamic(){return this.rawSet.rbIsDynamic(this.handle)}linearDamping(){return this.rawSet.rbLinearDamping(this.handle)}angularDamping(){return this.rawSet.rbAngularDamping(this.handle)}setLinearDamping(t){this.rawSet.rbSetLinearDamping(this.handle,t)}recomputeMassPropertiesFromColliders(){this.rawSet.rbRecomputeMassPropertiesFromColliders(this.handle,this.colliderSet.raw)}setAdditionalMass(t,e){this.rawSet.rbSetAdditionalMass(this.handle,t,e)}setAdditionalMassProperties(t,e,r,i,n){let o=h.intoRaw(e),c=h.intoRaw(r),p=g.intoRaw(i);this.rawSet.rbSetAdditionalMassProperties(this.handle,t,o,c,p,n),o.free(),c.free(),p.free()}setAngularDamping(t){this.rawSet.rbSetAngularDamping(this.handle,t)}resetForces(t){this.rawSet.rbResetForces(this.handle,t)}resetTorques(t){this.rawSet.rbResetTorques(this.handle,t)}addForce(t,e){const r=h.intoRaw(t);this.rawSet.rbAddForce(this.handle,r,e),r.free()}applyImpulse(t,e){const r=h.intoRaw(t);this.rawSet.rbApplyImpulse(this.handle,r,e),r.free()}addTorque(t,e){const r=h.intoRaw(t);this.rawSet.rbAddTorque(this.handle,r,e),r.free()}applyTorqueImpulse(t,e){const r=h.intoRaw(t);this.rawSet.rbApplyTorqueImpulse(this.handle,r,e),r.free()}addForceAtPoint(t,e,r){const i=h.intoRaw(t),n=h.intoRaw(e);this.rawSet.rbAddForceAtPoint(this.handle,i,n,r),i.free(),n.free()}applyImpulseAtPoint(t,e,r){const i=h.intoRaw(t),n=h.intoRaw(e);this.rawSet.rbApplyImpulseAtPoint(this.handle,i,n,r),i.free(),n.free()}},ur=class X{constructor(t){this.enabled=!0,this.status=t,this.translation=h.zeros(),this.rotation=g.identity(),this.gravityScale=1,this.linvel=h.zeros(),this.mass=0,this.massOnly=!1,this.centerOfMass=h.zeros(),this.translationsEnabledX=!0,this.translationsEnabledY=!0,this.angvel=h.zeros(),this.principalAngularInertia=h.zeros(),this.angularInertiaLocalFrame=g.identity(),this.translationsEnabledZ=!0,this.rotationsEnabledX=!0,this.rotationsEnabledY=!0,this.rotationsEnabledZ=!0,this.linearDamping=0,this.angularDamping=0,this.canSleep=!0,this.sleeping=!1,this.ccdEnabled=!1,this.dominanceGroup=0}static dynamic(){return new X(B.Dynamic)}static kinematicPositionBased(){return new X(B.KinematicPositionBased)}static kinematicVelocityBased(){return new X(B.KinematicVelocityBased)}static fixed(){return new X(B.Fixed)}static newDynamic(){return new X(B.Dynamic)}static newKinematicPositionBased(){return new X(B.KinematicPositionBased)}static newKinematicVelocityBased(){return new X(B.KinematicVelocityBased)}static newStatic(){return new X(B.Fixed)}setDominanceGroup(t){return this.dominanceGroup=t,this}setEnabled(t){return this.enabled=t,this}setTranslation(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:e,z:r},this}setRotation(t){return g.copy(this.rotation,t),this}setGravityScale(t){return this.gravityScale=t,this}setAdditionalMass(t){return this.mass=t,this.massOnly=!0,this}setLinvel(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The linvel components must be numbers.");return this.linvel={x:t,y:e,z:r},this}setAngvel(t){return h.copy(this.angvel,t),this}setAdditionalMassProperties(t,e,r,i){return this.mass=t,h.copy(this.centerOfMass,e),h.copy(this.principalAngularInertia,r),g.copy(this.angularInertiaLocalFrame,i),this.massOnly=!1,this}enabledTranslations(t,e,r){return this.translationsEnabledX=t,this.translationsEnabledY=e,this.translationsEnabledZ=r,this}restrictTranslations(t,e,r){return this.enabledTranslations(t,e,r)}lockTranslations(){return this.enabledTranslations(!1,!1,!1)}enabledRotations(t,e,r){return this.rotationsEnabledX=t,this.rotationsEnabledY=e,this.rotationsEnabledZ=r,this}restrictRotations(t,e,r){return this.enabledRotations(t,e,r)}lockRotations(){return this.restrictRotations(!1,!1,!1)}setLinearDamping(t){return this.linearDamping=t,this}setAngularDamping(t){return this.angularDamping=t,this}setCanSleep(t){return this.canSleep=t,this}setSleeping(t){return this.sleeping=t,this}setCcdEnabled(t){return this.ccdEnabled=t,this}setUserData(t){return this.userData=t,this}};class le{constructor(){this.fconv=new Float64Array(1),this.uconv=new Uint32Array(this.fconv.buffer),this.data=new Array,this.size=0}set(t,e){let r=this.index(t);for(;this.data.length<=r;)this.data.push(null);this.data[r]==null&&(this.size+=1),this.data[r]=e}len(){return this.size}delete(t){let e=this.index(t);e<this.data.length&&(this.data[e]!=null&&(this.size-=1),this.data[e]=null)}clear(){this.data=new Array}get(t){let e=this.index(t);return e<this.data.length?this.data[e]:null}forEach(t){for(const e of this.data)e!=null&&t(e)}getAll(){return this.data.filter(t=>t!=null)}index(t){return this.fconv[0]=t,this.uconv[0]}}ze=class{constructor(t){this.raw=t||new M,this.map=new le,t&&t.forEachRigidBodyHandle(e=>{this.map.set(e,new Mt(t,null,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createRigidBody(t,e){let r=h.intoRaw(e.translation),i=g.intoRaw(e.rotation),n=h.intoRaw(e.linvel),o=h.intoRaw(e.centerOfMass),c=h.intoRaw(e.angvel),p=h.intoRaw(e.principalAngularInertia),u=g.intoRaw(e.angularInertiaLocalFrame),w=this.raw.createRigidBody(e.enabled,r,i,e.gravityScale,e.mass,e.massOnly,o,n,c,p,u,e.translationsEnabledX,e.translationsEnabledY,e.translationsEnabledZ,e.rotationsEnabledX,e.rotationsEnabledY,e.rotationsEnabledZ,e.linearDamping,e.angularDamping,e.status,e.canSleep,e.sleeping,e.ccdEnabled,e.dominanceGroup);r.free(),i.free(),n.free(),o.free(),c.free(),p.free(),u.free();const _=new Mt(this.raw,t,w);return _.userData=e.userData,this.map.set(w,_),_}remove(t,e,r,i,n){for(let o=0;o<this.raw.rbNumColliders(t);o+=1)r.unmap(this.raw.rbCollider(t,o));i.forEachJointHandleAttachedToRigidBody(t,o=>i.unmap(o)),n.forEachJointHandleAttachedToRigidBody(t,o=>n.unmap(o)),this.raw.remove(t,e.raw,r.raw,i.raw,n.raw),this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachActiveRigidBody(t,e){t.forEachActiveRigidBodyHandle(r=>{e(this.get(r))})}getAll(){return this.map.getAll()}},Se=class{constructor(t){this.raw=t||new Y}free(){this.raw&&this.raw.free(),this.raw=void 0}get dt(){return this.raw.dt}get erp(){return this.raw.erp}get allowedLinearError(){return this.raw.allowedLinearError}get predictionDistance(){return this.raw.predictionDistance}get maxVelocityIterations(){return this.raw.maxVelocityIterations}get maxVelocityFrictionIterations(){return this.raw.maxVelocityFrictionIterations}get maxStabilizationIterations(){return this.raw.maxStabilizationIterations}get minIslandSize(){return this.raw.minIslandSize}get maxCcdSubsteps(){return this.raw.maxCcdSubsteps}set dt(t){this.raw.dt=t}set erp(t){this.raw.erp=t}set allowedLinearError(t){this.raw.allowedLinearError=t}set predictionDistance(t){this.raw.predictionDistance=t}set maxVelocityIterations(t){this.raw.maxVelocityIterations=t}set maxVelocityFrictionIterations(t){this.raw.maxVelocityFrictionIterations=t}set maxStabilizationIterations(t){this.raw.maxStabilizationIterations=t}set minIslandSize(t){this.raw.minIslandSize=t}set maxCcdSubsteps(t){this.raw.maxCcdSubsteps=t}},function(a){a[a.Revolute=0]="Revolute",a[a.Fixed=1]="Fixed",a[a.Prismatic=2]="Prismatic",a[a.Spherical=3]="Spherical"}(H||(H={})),function(a){a[a.AccelerationBased=0]="AccelerationBased",a[a.ForceBased=1]="ForceBased"}(Ae||(Ae={})),Q=class Ir{constructor(t,e,r){this.rawSet=t,this.bodySet=e,this.handle=r}static newTyped(t,e,r){switch(t.jointType(r)){case H.Revolute:return new He(t,e,r);case H.Prismatic:return new Te(t,e,r);case H.Fixed:return new ye(t,e,r);case H.Spherical:return new Be(t,e,r);default:return new Ir(t,e,r)}}finalizeDeserialization(t){this.bodySet=t}isValid(){return this.rawSet.contains(this.handle)}body1(){return this.bodySet.get(this.rawSet.jointBodyHandle1(this.handle))}body2(){return this.bodySet.get(this.rawSet.jointBodyHandle2(this.handle))}type(){return this.rawSet.jointType(this.handle)}frameX1(){return g.fromRaw(this.rawSet.jointFrameX1(this.handle))}frameX2(){return g.fromRaw(this.rawSet.jointFrameX2(this.handle))}anchor1(){return h.fromRaw(this.rawSet.jointAnchor1(this.handle))}anchor2(){return h.fromRaw(this.rawSet.jointAnchor2(this.handle))}setAnchor1(t){const e=h.intoRaw(t);this.rawSet.jointSetAnchor1(this.handle,e),e.free()}setAnchor2(t){const e=h.intoRaw(t);this.rawSet.jointSetAnchor2(this.handle,e),e.free()}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}},Jt=class extends Q{limitsEnabled(){return this.rawSet.jointLimitsEnabled(this.handle,this.rawAxis())}limitsMin(){return this.rawSet.jointLimitsMin(this.handle,this.rawAxis())}limitsMax(){return this.rawSet.jointLimitsMax(this.handle,this.rawAxis())}setLimits(t,e){this.rawSet.jointSetLimits(this.handle,this.rawAxis(),t,e)}configureMotorModel(t){this.rawSet.jointConfigureMotorModel(this.handle,this.rawAxis(),t)}configureMotorVelocity(t,e){this.rawSet.jointConfigureMotorVelocity(this.handle,this.rawAxis(),t,e)}configureMotorPosition(t,e,r){this.rawSet.jointConfigureMotorPosition(this.handle,this.rawAxis(),t,e,r)}configureMotor(t,e,r,i){this.rawSet.jointConfigureMotor(this.handle,this.rawAxis(),t,e,r,i)}},ye=class extends Q{},Te=class extends Jt{rawAxis(){return Xt.X}},He=class extends Jt{rawAxis(){return Xt.AngX}},Be=class extends Q{},dr=class Ot{constructor(){}static fixed(t,e,r,i){let n=new Ot;return n.anchor1=t,n.anchor2=r,n.frame1=e,n.frame2=i,n.jointType=H.Fixed,n}static spherical(t,e){let r=new Ot;return r.anchor1=t,r.anchor2=e,r.jointType=H.Spherical,r}static prismatic(t,e,r){let i=new Ot;return i.anchor1=t,i.anchor2=e,i.axis=r,i.jointType=H.Prismatic,i}static revolute(t,e,r){let i=new Ot;return i.anchor1=t,i.anchor2=e,i.axis=r,i.jointType=H.Revolute,i}intoRaw(){let t=h.intoRaw(this.anchor1),e=h.intoRaw(this.anchor2),r,i,n=!1,o=0,c=0;switch(this.jointType){case H.Fixed:let p=g.intoRaw(this.frame1),u=g.intoRaw(this.frame2);i=N.fixed(t,p,e,u),p.free(),u.free();break;case H.Prismatic:r=h.intoRaw(this.axis),this.limitsEnabled&&(n=!0,o=this.limits[0],c=this.limits[1]),i=N.prismatic(t,e,r,n,o,c),r.free();break;case H.Spherical:i=N.spherical(t,e);break;case H.Revolute:r=h.intoRaw(this.axis),i=N.revolute(t,e,r),r.free();break}return t.free(),e.free(),i}},Re=class{constructor(t){this.raw=t||new J,this.map=new le,t&&t.forEachJointHandle(e=>{this.map.set(e,Q.newTyped(t,null,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createJoint(t,e,r,i,n){const o=e.intoRaw(),c=this.raw.createJoint(o,r,i,n);o.free();let p=Q.newTyped(this.raw,t,c);return this.map.set(c,p),p}remove(t,e){this.raw.remove(t,e),this.unmap(t)}forEachJointHandleAttachedToRigidBody(t,e){this.raw.forEachJointAttachedToRigidBody(t,e)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}},$=class xr{constructor(t,e){this.rawSet=t,this.handle=e}static newTyped(t,e){switch(t.jointType(e)){case H.Revolute:return new De(t,e);case H.Prismatic:return new Pe(t,e);case H.Fixed:return new be(t,e);case H.Spherical:return new Le(t,e);default:return new xr(t,e)}}isValid(){return this.rawSet.contains(this.handle)}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}},Gt=class extends ${},be=class extends ${},Pe=class extends Gt{rawAxis(){return Xt.X}},De=class extends Gt{rawAxis(){return Xt.AngX}},Le=class extends ${},Ee=class{constructor(t){this.raw=t||new O,this.map=new le,t&&t.forEachJointHandle(e=>{this.map.set(e,$.newTyped(this.raw,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}createJoint(t,e,r,i){const n=t.intoRaw(),o=this.raw.createJoint(n,e,r,i);n.free();let c=$.newTyped(this.raw,o);return this.map.set(o,c),c}remove(t,e){this.raw.remove(t,e),this.map.delete(t)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachJointHandleAttachedToRigidBody(t,e){this.raw.forEachJointAttachedToRigidBody(t,e)}getAll(){return this.map.getAll()}},function(a){a[a.Average=0]="Average",a[a.Min=1]="Min",a[a.Multiply=2]="Multiply",a[a.Max=3]="Max"}(at||(at={})),ue=class{constructor(t){this.raw=t||new st}free(){this.raw&&this.raw.free(),this.raw=void 0}},ve=class{constructor(t){this.raw=t||new G}free(){this.raw&&this.raw.free(),this.raw=void 0}forEachActiveRigidBodyHandle(t){this.raw.forEachActiveRigidBodyHandle(t)}},pe=class{constructor(t){this.raw=t||new K}free(){this.raw&&this.raw.free(),this.raw=void 0}},Ie=class{constructor(t){this.raw=t||new V,this.tempManifold=new Je(null)}free(){this.raw&&this.raw.free(),this.raw=void 0}contactsWith(t,e){this.raw.contacts_with(t,e)}intersectionsWith(t,e){this.raw.intersections_with(t,e)}contactPair(t,e,r){const i=this.raw.contact_pair(t,e);if(i){const n=i.collider1()!=t;let o;for(o=0;o<i.numContactManifolds();++o)this.tempManifold.raw=i.contactManifold(o),this.tempManifold.raw&&r(this.tempManifold,n),this.tempManifold.free();i.free()}}intersectionPair(t,e){return this.raw.intersection_pair(t,e)}},Je=class{constructor(t){this.raw=t}free(){this.raw&&this.raw.free(),this.raw=void 0}normal(){return h.fromRaw(this.raw.normal())}localNormal1(){return h.fromRaw(this.raw.local_n1())}localNormal2(){return h.fromRaw(this.raw.local_n2())}subshape1(){return this.raw.subshape1()}subshape2(){return this.raw.subshape2()}numContacts(){return this.raw.num_contacts()}localContactPoint1(t){return h.fromRaw(this.raw.contact_local_p1(t))}localContactPoint2(t){return h.fromRaw(this.raw.contact_local_p2(t))}contactDist(t){return this.raw.contact_dist(t)}contactFid1(t){return this.raw.contact_fid1(t)}contactFid2(t){return this.raw.contact_fid2(t)}contactImpulse(t){return this.raw.contact_impulse(t)}contactTangentImpulseX(t){return this.raw.contact_tangent_impulse_x(t)}contactTangentImpulseY(t){return this.raw.contact_tangent_impulse_y(t)}numSolverContacts(){return this.raw.num_solver_contacts()}solverContactPoint(t){return h.fromRaw(this.raw.solver_contact_point(t))}solverContactDist(t){return this.raw.solver_contact_dist(t)}solverContactFriction(t){return this.raw.solver_contact_friction(t)}solverContactRestitution(t){return this.raw.solver_contact_restitution(t)}solverContactTangentVelocity(t){return h.fromRaw(this.raw.solver_contact_tangent_velocity(t))}},ct=class Tr{constructor(t,e,r,i,n){this.distance=t,this.point1=e,this.point2=r,this.normal1=i,this.normal2=n}static fromRaw(t){if(!t)return null;const e=new Tr(t.distance(),h.fromRaw(t.point1()),h.fromRaw(t.point2()),h.fromRaw(t.normal1()),h.fromRaw(t.normal2()));return t.free(),e}},function(a){a[a.Vertex=0]="Vertex",a[a.Edge=1]="Edge",a[a.Face=2]="Face",a[a.Unknown=3]="Unknown"}(it||(it={})),Et=class Pr{constructor(t,e){this.point=t,this.isInside=e}static fromRaw(t){if(!t)return null;const e=new Pr(h.fromRaw(t.point()),t.isInside());return t.free(),e}},At=class Mr{constructor(t,e,r,i,n){this.featureType=it.Unknown,this.featureId=void 0,this.collider=t,this.point=e,this.isInside=r,n!==void 0&&(this.featureId=n),i!==void 0&&(this.featureType=i)}static fromRaw(t,e){if(!e)return null;const r=new Mr(t.get(e.colliderHandle()),h.fromRaw(e.point()),e.isInside(),e.featureType(),e.featureId());return e.free(),r}},pr=class{constructor(t,e){this.origin=t,this.dir=e}pointAt(t){return{x:this.origin.x+this.dir.x*t,y:this.origin.y+this.dir.y*t,z:this.origin.z+this.dir.z*t}}},Pt=class jr{constructor(t,e,r,i){this.featureType=it.Unknown,this.featureId=void 0,this.toi=t,this.normal=e,i!==void 0&&(this.featureId=i),r!==void 0&&(this.featureType=r)}static fromRaw(t){if(!t)return null;const e=new jr(t.toi(),h.fromRaw(t.normal()),t.featureType(),t.featureId());return t.free(),e}},Tt=class Fr{constructor(t,e,r,i,n){this.featureType=it.Unknown,this.featureId=void 0,this.collider=t,this.toi=e,this.normal=r,n!==void 0&&(this.featureId=n),i!==void 0&&(this.featureType=i)}static fromRaw(t,e){if(!e)return null;const r=new Fr(t.get(e.colliderHandle()),e.toi(),h.fromRaw(e.normal()),e.featureType(),e.featureId());return e.free(),r}},Fe=class Hr{constructor(t,e){this.collider=t,this.toi=e}static fromRaw(t,e){if(!e)return null;const r=new Hr(t.get(e.colliderHandle()),e.toi());return e.free(),r}},ht=class Dr{constructor(t,e,r,i,n){this.toi=t,this.witness1=e,this.witness2=r,this.normal1=i,this.normal2=n}static fromRaw(t,e){if(!e)return null;const r=new Dr(e.toi(),h.fromRaw(e.witness1()),h.fromRaw(e.witness2()),h.fromRaw(e.normal1()),h.fromRaw(e.normal2()));return e.free(),r}},Bt=class zr extends ht{constructor(t,e,r,i,n,o){super(e,r,i,n,o),this.collider=t}static fromRaw(t,e){if(!e)return null;const r=new zr(t.get(e.colliderHandle()),e.toi(),h.fromRaw(e.witness1()),h.fromRaw(e.witness2()),h.fromRaw(e.normal1()),h.fromRaw(e.normal2()));return e.free(),r}},j=class{static fromRaw(t,e){const r=t.coShapeType(e);let i,n,o,c,p,u,w;switch(r){case R.Ball:return new yt(t.coRadius(e));case R.Cuboid:return i=t.coHalfExtents(e),new St(i.x,i.y,i.z);case R.RoundCuboid:return i=t.coHalfExtents(e),n=t.coRoundRadius(e),new Ft(i.x,i.y,i.z,n);case R.Capsule:return p=t.coHalfHeight(e),u=t.coRadius(e),new bt(p,u);case R.Segment:return o=t.coVertices(e),new zt(h.new(o[0],o[1],o[2]),h.new(o[3],o[4],o[5]));case R.Polyline:return o=t.coVertices(e),c=t.coIndices(e),new It(o,c);case R.Triangle:return o=t.coVertices(e),new kt(h.new(o[0],o[1],o[2]),h.new(o[3],o[4],o[5]),h.new(o[6],o[7],o[8]));case R.RoundTriangle:return o=t.coVertices(e),n=t.coRoundRadius(e),new Dt(h.new(o[0],o[1],o[2]),h.new(o[3],o[4],o[5]),h.new(o[6],o[7],o[8]),n);case R.HalfSpace:return w=h.fromRaw(t.coHalfspaceNormal(e)),new ge(w);case R.TriMesh:return o=t.coVertices(e),c=t.coIndices(e),new Lt(o,c);case R.HeightField:const _=t.coHeightfieldScale(e),m=t.coHeightfieldHeights(e),b=t.coHeightfieldNRows(e),x=t.coHeightfieldNCols(e);return new Ct(b,x,m,_);case R.ConvexPolyhedron:return o=t.coVertices(e),c=t.coIndices(e),new ot(o,c);case R.RoundConvexPolyhedron:return o=t.coVertices(e),c=t.coIndices(e),n=t.coRoundRadius(e),new lt(o,c,n);case R.Cylinder:return p=t.coHalfHeight(e),u=t.coRadius(e),new vt(p,u);case R.RoundCylinder:return p=t.coHalfHeight(e),u=t.coRadius(e),n=t.coRoundRadius(e),new Ht(p,u,n);case R.Cone:return p=t.coHalfHeight(e),u=t.coRadius(e),new Rt(p,u);case R.RoundCone:return p=t.coHalfHeight(e),u=t.coRadius(e),n=t.coRoundRadius(e),new jt(p,u,n);default:throw new Error("unknown shape type: "+r)}}castShape(t,e,r,i,n,o,c,p,u){let w=h.intoRaw(t),_=g.intoRaw(e),m=h.intoRaw(r),b=h.intoRaw(n),x=g.intoRaw(o),k=h.intoRaw(c),W=this.intoRaw(),U=i.intoRaw(),rt=ht.fromRaw(null,W.castShape(w,_,m,U,b,x,k,p,u));return w.free(),_.free(),m.free(),b.free(),x.free(),k.free(),W.free(),U.free(),rt}intersectsShape(t,e,r,i,n){let o=h.intoRaw(t),c=g.intoRaw(e),p=h.intoRaw(i),u=g.intoRaw(n),w=this.intoRaw(),_=r.intoRaw(),m=w.intersectsShape(o,c,_,p,u);return o.free(),c.free(),p.free(),u.free(),w.free(),_.free(),m}contactShape(t,e,r,i,n,o){let c=h.intoRaw(t),p=g.intoRaw(e),u=h.intoRaw(i),w=g.intoRaw(n),_=this.intoRaw(),m=r.intoRaw(),b=ct.fromRaw(_.contactShape(c,p,m,u,w,o));return c.free(),p.free(),u.free(),w.free(),_.free(),m.free(),b}containsPoint(t,e,r){let i=h.intoRaw(t),n=g.intoRaw(e),o=h.intoRaw(r),c=this.intoRaw(),p=c.containsPoint(i,n,o);return i.free(),n.free(),o.free(),c.free(),p}projectPoint(t,e,r,i){let n=h.intoRaw(t),o=g.intoRaw(e),c=h.intoRaw(r),p=this.intoRaw(),u=Et.fromRaw(p.projectPoint(n,o,c,i));return n.free(),o.free(),c.free(),p.free(),u}intersectsRay(t,e,r,i){let n=h.intoRaw(e),o=g.intoRaw(r),c=h.intoRaw(t.origin),p=h.intoRaw(t.dir),u=this.intoRaw(),w=u.intersectsRay(n,o,c,p,i);return n.free(),o.free(),c.free(),p.free(),u.free(),w}castRay(t,e,r,i,n){let o=h.intoRaw(e),c=g.intoRaw(r),p=h.intoRaw(t.origin),u=h.intoRaw(t.dir),w=this.intoRaw(),_=w.castRay(o,c,p,u,i,n);return o.free(),c.free(),p.free(),u.free(),w.free(),_}castRayAndGetNormal(t,e,r,i,n){let o=h.intoRaw(e),c=g.intoRaw(r),p=h.intoRaw(t.origin),u=h.intoRaw(t.dir),w=this.intoRaw(),_=Pt.fromRaw(w.castRayAndGetNormal(o,c,p,u,i,n));return o.free(),c.free(),p.free(),u.free(),w.free(),_}},function(a){a[a.Ball=0]="Ball",a[a.Cuboid=1]="Cuboid",a[a.Capsule=2]="Capsule",a[a.Segment=3]="Segment",a[a.Polyline=4]="Polyline",a[a.Triangle=5]="Triangle",a[a.TriMesh=6]="TriMesh",a[a.HeightField=7]="HeightField",a[a.ConvexPolyhedron=9]="ConvexPolyhedron",a[a.Cylinder=10]="Cylinder",a[a.Cone=11]="Cone",a[a.RoundCuboid=12]="RoundCuboid",a[a.RoundTriangle=13]="RoundTriangle",a[a.RoundCylinder=14]="RoundCylinder",a[a.RoundCone=15]="RoundCone",a[a.RoundConvexPolyhedron=16]="RoundConvexPolyhedron",a[a.HalfSpace=17]="HalfSpace"}(R||(R={})),yt=class extends j{constructor(t){super(),this.type=R.Ball,this.radius=t}intoRaw(){return y.ball(this.radius)}},ge=class extends j{constructor(t){super(),this.type=R.HalfSpace,this.normal=t}intoRaw(){let t=h.intoRaw(this.normal),e=y.halfspace(t);return t.free(),e}},St=class extends j{constructor(t,e,r){super(),this.type=R.Cuboid,this.halfExtents=h.new(t,e,r)}intoRaw(){return y.cuboid(this.halfExtents.x,this.halfExtents.y,this.halfExtents.z)}},Ft=class extends j{constructor(t,e,r,i){super(),this.type=R.RoundCuboid,this.halfExtents=h.new(t,e,r),this.borderRadius=i}intoRaw(){return y.roundCuboid(this.halfExtents.x,this.halfExtents.y,this.halfExtents.z,this.borderRadius)}},bt=class extends j{constructor(t,e){super(),this.type=R.Capsule,this.halfHeight=t,this.radius=e}intoRaw(){return y.capsule(this.halfHeight,this.radius)}},zt=class extends j{constructor(t,e){super(),this.type=R.Segment,this.a=t,this.b=e}intoRaw(){let t=h.intoRaw(this.a),e=h.intoRaw(this.b),r=y.segment(t,e);return t.free(),e.free(),r}},kt=class extends j{constructor(t,e,r){super(),this.type=R.Triangle,this.a=t,this.b=e,this.c=r}intoRaw(){let t=h.intoRaw(this.a),e=h.intoRaw(this.b),r=h.intoRaw(this.c),i=y.triangle(t,e,r);return t.free(),e.free(),r.free(),i}},Dt=class extends j{constructor(t,e,r,i){super(),this.type=R.RoundTriangle,this.a=t,this.b=e,this.c=r,this.borderRadius=i}intoRaw(){let t=h.intoRaw(this.a),e=h.intoRaw(this.b),r=h.intoRaw(this.c),i=y.roundTriangle(t,e,r,this.borderRadius);return t.free(),e.free(),r.free(),i}},It=class extends j{constructor(t,e){super(),this.type=R.Polyline,this.vertices=t,this.indices=e??new Uint32Array(0)}intoRaw(){return y.polyline(this.vertices,this.indices)}},Lt=class extends j{constructor(t,e){super(),this.type=R.TriMesh,this.vertices=t,this.indices=e}intoRaw(){return y.trimesh(this.vertices,this.indices)}},ot=class extends j{constructor(t,e){super(),this.type=R.ConvexPolyhedron,this.vertices=t,this.indices=e}intoRaw(){return this.indices?y.convexMesh(this.vertices,this.indices):y.convexHull(this.vertices)}},lt=class extends j{constructor(t,e,r){super(),this.type=R.RoundConvexPolyhedron,this.vertices=t,this.indices=e,this.borderRadius=r}intoRaw(){return this.indices?y.roundConvexMesh(this.vertices,this.indices,this.borderRadius):y.roundConvexHull(this.vertices,this.borderRadius)}},Ct=class extends j{constructor(t,e,r,i){super(),this.type=R.HeightField,this.nrows=t,this.ncols=e,this.heights=r,this.scale=i}intoRaw(){let t=h.intoRaw(this.scale),e=y.heightfield(this.nrows,this.ncols,this.heights,t);return t.free(),e}},vt=class extends j{constructor(t,e){super(),this.type=R.Cylinder,this.halfHeight=t,this.radius=e}intoRaw(){return y.cylinder(this.halfHeight,this.radius)}},Ht=class extends j{constructor(t,e,r){super(),this.type=R.RoundCylinder,this.borderRadius=r,this.halfHeight=t,this.radius=e}intoRaw(){return y.roundCylinder(this.halfHeight,this.radius,this.borderRadius)}},Rt=class extends j{constructor(t,e){super(),this.type=R.Cone,this.halfHeight=t,this.radius=e}intoRaw(){return y.cone(this.halfHeight,this.radius)}},jt=class extends j{constructor(t,e,r){super(),this.type=R.RoundCone,this.halfHeight=t,this.radius=e,this.borderRadius=r}intoRaw(){return y.roundCone(this.halfHeight,this.radius,this.borderRadius)}},function(a){a[a.DYNAMIC_DYNAMIC=1]="DYNAMIC_DYNAMIC",a[a.DYNAMIC_KINEMATIC=12]="DYNAMIC_KINEMATIC",a[a.DYNAMIC_FIXED=2]="DYNAMIC_FIXED",a[a.KINEMATIC_KINEMATIC=52224]="KINEMATIC_KINEMATIC",a[a.KINEMATIC_FIXED=8704]="KINEMATIC_FIXED",a[a.FIXED_FIXED=32]="FIXED_FIXED",a[a.DEFAULT=15]="DEFAULT",a[a.ALL=60943]="ALL"}(mt||(mt={})),gt=class{constructor(t,e,r,i){this.colliderSet=t,this.handle=e,this._parent=r,this._shape=i}finalizeDeserialization(t){this.handle!=null&&(this._parent=t.get(this.colliderSet.raw.coParent(this.handle)))}ensureShapeIsCached(){this._shape||(this._shape=j.fromRaw(this.colliderSet.raw,this.handle))}get shape(){return this.ensureShapeIsCached(),this._shape}isValid(){return this.colliderSet.raw.contains(this.handle)}translation(){return h.fromRaw(this.colliderSet.raw.coTranslation(this.handle))}rotation(){return g.fromRaw(this.colliderSet.raw.coRotation(this.handle))}isSensor(){return this.colliderSet.raw.coIsSensor(this.handle)}setSensor(t){this.colliderSet.raw.coSetSensor(this.handle,t)}setShape(t){let e=t.intoRaw();this.colliderSet.raw.coSetShape(this.handle,e),e.free(),this._shape=t}setEnabled(t){this.colliderSet.raw.coSetEnabled(this.handle,t)}isEnabled(){return this.colliderSet.raw.coIsEnabled(this.handle)}setRestitution(t){this.colliderSet.raw.coSetRestitution(this.handle,t)}setFriction(t){this.colliderSet.raw.coSetFriction(this.handle,t)}frictionCombineRule(){return this.colliderSet.raw.coFrictionCombineRule(this.handle)}setFrictionCombineRule(t){this.colliderSet.raw.coSetFrictionCombineRule(this.handle,t)}restitutionCombineRule(){return this.colliderSet.raw.coRestitutionCombineRule(this.handle)}setRestitutionCombineRule(t){this.colliderSet.raw.coSetRestitutionCombineRule(this.handle,t)}setCollisionGroups(t){this.colliderSet.raw.coSetCollisionGroups(this.handle,t)}setSolverGroups(t){this.colliderSet.raw.coSetSolverGroups(this.handle,t)}activeHooks(){return this.colliderSet.raw.coActiveHooks(this.handle)}setActiveHooks(t){this.colliderSet.raw.coSetActiveHooks(this.handle,t)}activeEvents(){return this.colliderSet.raw.coActiveEvents(this.handle)}setActiveEvents(t){this.colliderSet.raw.coSetActiveEvents(this.handle,t)}activeCollisionTypes(){return this.colliderSet.raw.coActiveCollisionTypes(this.handle)}setContactForceEventThreshold(t){return this.colliderSet.raw.coSetContactForceEventThreshold(this.handle,t)}contactForceEventThreshold(){return this.colliderSet.raw.coContactForceEventThreshold(this.handle)}setActiveCollisionTypes(t){this.colliderSet.raw.coSetActiveCollisionTypes(this.handle,t)}setDensity(t){this.colliderSet.raw.coSetDensity(this.handle,t)}setMass(t){this.colliderSet.raw.coSetMass(this.handle,t)}setMassProperties(t,e,r,i){let n=h.intoRaw(e),o=h.intoRaw(r),c=g.intoRaw(i);this.colliderSet.raw.coSetMassProperties(this.handle,t,n,o,c),n.free(),o.free(),c.free()}setTranslation(t){this.colliderSet.raw.coSetTranslation(this.handle,t.x,t.y,t.z)}setTranslationWrtParent(t){this.colliderSet.raw.coSetTranslationWrtParent(this.handle,t.x,t.y,t.z)}setRotation(t){this.colliderSet.raw.coSetRotation(this.handle,t.x,t.y,t.z,t.w)}setRotationWrtParent(t){this.colliderSet.raw.coSetRotationWrtParent(this.handle,t.x,t.y,t.z,t.w)}shapeType(){return this.colliderSet.raw.coShapeType(this.handle)}halfExtents(){return h.fromRaw(this.colliderSet.raw.coHalfExtents(this.handle))}setHalfExtents(t){const e=h.intoRaw(t);this.colliderSet.raw.coSetHalfExtents(this.handle,e)}radius(){return this.colliderSet.raw.coRadius(this.handle)}setRadius(t){this.colliderSet.raw.coSetRadius(this.handle,t)}roundRadius(){return this.colliderSet.raw.coRoundRadius(this.handle)}setRoundRadius(t){this.colliderSet.raw.coSetRoundRadius(this.handle,t)}halfHeight(){return this.colliderSet.raw.coHalfHeight(this.handle)}setHalfHeight(t){this.colliderSet.raw.coSetHalfHeight(this.handle,t)}vertices(){return this.colliderSet.raw.coVertices(this.handle)}indices(){return this.colliderSet.raw.coIndices(this.handle)}heightfieldHeights(){return this.colliderSet.raw.coHeightfieldHeights(this.handle)}heightfieldScale(){let t=this.colliderSet.raw.coHeightfieldScale(this.handle);return h.fromRaw(t)}heightfieldNRows(){return this.colliderSet.raw.coHeightfieldNRows(this.handle)}heightfieldNCols(){return this.colliderSet.raw.coHeightfieldNCols(this.handle)}parent(){return this._parent}friction(){return this.colliderSet.raw.coFriction(this.handle)}restitution(){return this.colliderSet.raw.coRestitution(this.handle)}density(){return this.colliderSet.raw.coDensity(this.handle)}mass(){return this.colliderSet.raw.coMass(this.handle)}volume(){return this.colliderSet.raw.coVolume(this.handle)}collisionGroups(){return this.colliderSet.raw.coCollisionGroups(this.handle)}solverGroups(){return this.colliderSet.raw.coSolverGroups(this.handle)}containsPoint(t){let e=h.intoRaw(t),r=this.colliderSet.raw.coContainsPoint(this.handle,e);return e.free(),r}projectPoint(t,e){let r=h.intoRaw(t),i=Et.fromRaw(this.colliderSet.raw.coProjectPoint(this.handle,r,e));return r.free(),i}intersectsRay(t,e){let r=h.intoRaw(t.origin),i=h.intoRaw(t.dir),n=this.colliderSet.raw.coIntersectsRay(this.handle,r,i,e);return r.free(),i.free(),n}castShape(t,e,r,i,n,o,c){let p=h.intoRaw(t),u=h.intoRaw(r),w=g.intoRaw(i),_=h.intoRaw(n),m=e.intoRaw(),b=ht.fromRaw(this.colliderSet,this.colliderSet.raw.coCastShape(this.handle,p,m,u,w,_,o,c));return p.free(),u.free(),w.free(),_.free(),m.free(),b}castCollider(t,e,r,i,n){let o=h.intoRaw(t),c=h.intoRaw(r),p=Bt.fromRaw(this.colliderSet,this.colliderSet.raw.coCastCollider(this.handle,o,e.handle,c,i,n));return o.free(),c.free(),p}intersectsShape(t,e,r){let i=h.intoRaw(e),n=g.intoRaw(r),o=t.intoRaw(),c=this.colliderSet.raw.coIntersectsShape(this.handle,o,i,n);return i.free(),n.free(),o.free(),c}contactShape(t,e,r,i){let n=h.intoRaw(e),o=g.intoRaw(r),c=t.intoRaw(),p=ct.fromRaw(this.colliderSet.raw.coContactShape(this.handle,c,n,o,i));return n.free(),o.free(),c.free(),p}contactCollider(t,e){return ct.fromRaw(this.colliderSet.raw.coContactCollider(this.handle,t.handle,e))}castRay(t,e,r){let i=h.intoRaw(t.origin),n=h.intoRaw(t.dir),o=this.colliderSet.raw.coCastRay(this.handle,i,n,e,r);return i.free(),n.free(),o}castRayAndGetNormal(t,e,r){let i=h.intoRaw(t.origin),n=h.intoRaw(t.dir),o=Pt.fromRaw(this.colliderSet.raw.coCastRayAndGetNormal(this.handle,i,n,e,r));return i.free(),n.free(),o}},function(a){a[a.Density=0]="Density",a[a.Mass=1]="Mass",a[a.MassProps=2]="MassProps"}(Z||(Z={})),cr=class D{constructor(t){this.enabled=!0,this.shape=t,this.massPropsMode=Z.Density,this.density=1,this.friction=.5,this.restitution=0,this.rotation=g.identity(),this.translation=h.zeros(),this.isSensor=!1,this.collisionGroups=4294967295,this.solverGroups=4294967295,this.frictionCombineRule=at.Average,this.restitutionCombineRule=at.Average,this.activeCollisionTypes=mt.DEFAULT,this.activeEvents=0,this.activeHooks=0,this.mass=0,this.centerOfMass=h.zeros(),this.contactForceEventThreshold=0,this.principalAngularInertia=h.zeros(),this.angularInertiaLocalFrame=g.identity()}static ball(t){const e=new yt(t);return new D(e)}static capsule(t,e){const r=new bt(t,e);return new D(r)}static segment(t,e){const r=new zt(t,e);return new D(r)}static triangle(t,e,r){const i=new kt(t,e,r);return new D(i)}static roundTriangle(t,e,r,i){const n=new Dt(t,e,r,i);return new D(n)}static polyline(t,e){const r=new It(t,e);return new D(r)}static trimesh(t,e){const r=new Lt(t,e);return new D(r)}static cuboid(t,e,r){const i=new St(t,e,r);return new D(i)}static roundCuboid(t,e,r,i){const n=new Ft(t,e,r,i);return new D(n)}static heightfield(t,e,r,i){const n=new Ct(t,e,r,i);return new D(n)}static cylinder(t,e){const r=new vt(t,e);return new D(r)}static roundCylinder(t,e,r){const i=new Ht(t,e,r);return new D(i)}static cone(t,e){const r=new Rt(t,e);return new D(r)}static roundCone(t,e,r){const i=new jt(t,e,r);return new D(i)}static convexHull(t){const e=new ot(t,null);return new D(e)}static convexMesh(t,e){const r=new ot(t,e);return new D(r)}static roundConvexHull(t,e){const r=new lt(t,null,e);return new D(r)}static roundConvexMesh(t,e,r){const i=new lt(t,e,r);return new D(i)}setTranslation(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:e,z:r},this}setRotation(t){return g.copy(this.rotation,t),this}setSensor(t){return this.isSensor=t,this}setEnabled(t){return this.enabled=t,this}setDensity(t){return this.massPropsMode=Z.Density,this.density=t,this}setMass(t){return this.massPropsMode=Z.Mass,this.mass=t,this}setMassProperties(t,e,r,i){return this.massPropsMode=Z.MassProps,this.mass=t,h.copy(this.centerOfMass,e),h.copy(this.principalAngularInertia,r),g.copy(this.angularInertiaLocalFrame,i),this}setRestitution(t){return this.restitution=t,this}setFriction(t){return this.friction=t,this}setFrictionCombineRule(t){return this.frictionCombineRule=t,this}setRestitutionCombineRule(t){return this.restitutionCombineRule=t,this}setCollisionGroups(t){return this.collisionGroups=t,this}setSolverGroups(t){return this.solverGroups=t,this}setActiveHooks(t){return this.activeHooks=t,this}setActiveEvents(t){return this.activeEvents=t,this}setActiveCollisionTypes(t){return this.activeCollisionTypes=t,this}setContactForceEventThreshold(t){return this.contactForceEventThreshold=t,this}},_e=class{constructor(t){this.raw=t||new P,this.map=new le,t&&t.forEachColliderHandle(e=>{this.map.set(e,new gt(this,e,null))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}castClosure(t){return e=>{if(t)return t(this.get(e))}}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createCollider(t,e,r){let i=r!=null&&r!=null;if(i&&isNaN(r))throw Error("Cannot create a collider with a parent rigid-body handle that is not a number.");let n=e.shape.intoRaw(),o=h.intoRaw(e.translation),c=g.intoRaw(e.rotation),p=h.intoRaw(e.centerOfMass),u=h.intoRaw(e.principalAngularInertia),w=g.intoRaw(e.angularInertiaLocalFrame),_=this.raw.createCollider(e.enabled,n,o,c,e.massPropsMode,e.mass,p,u,w,e.density,e.friction,e.restitution,e.frictionCombineRule,e.restitutionCombineRule,e.isSensor,e.collisionGroups,e.solverGroups,e.activeCollisionTypes,e.activeHooks,e.activeEvents,e.contactForceEventThreshold,i,i?r:0,t.raw);n.free(),o.free(),c.free(),p.free(),u.free(),w.free();let m=i?t.get(r):null,b=new gt(this,_,m,e.shape);return this.map.set(_,b),b}remove(t,e,r,i){this.raw.remove(t,e.raw,r.raw,i),this.unmap(t)}unmap(t){this.map.delete(t)}get(t){return this.map.get(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}},xe=class{constructor(t){this.raw=t||new Yt}free(){this.raw&&this.raw.free(),this.raw=void 0}step(t,e,r,i,n,o,c,p,u,w,_,m){let b=h.intoRaw(t);_?this.raw.stepWithEvents(b,e.raw,r.raw,i.raw,n.raw,o.raw,c.raw,p.raw,u.raw,w.raw,_.raw,m,m?m.filterContactPair:null,m?m.filterIntersectionPair:null):this.raw.step(b,e.raw,r.raw,i.raw,n.raw,o.raw,c.raw,p.raw,u.raw,w.raw),b.free()}},function(a){a[a.EXCLUDE_FIXED=1]="EXCLUDE_FIXED",a[a.EXCLUDE_KINEMATIC=2]="EXCLUDE_KINEMATIC",a[a.EXCLUDE_DYNAMIC=4]="EXCLUDE_DYNAMIC",a[a.EXCLUDE_SENSORS=8]="EXCLUDE_SENSORS",a[a.EXCLUDE_SOLIDS=16]="EXCLUDE_SOLIDS",a[a.ONLY_DYNAMIC=3]="ONLY_DYNAMIC",a[a.ONLY_KINEMATIC=5]="ONLY_KINEMATIC",a[a.ONLY_FIXED=6]="ONLY_FIXED"}(Me||(Me={})),je=class{constructor(t){this.raw=t||new wt}free(){this.raw&&this.raw.free(),this.raw=void 0}update(t,e){this.raw.update(t.raw,e.raw)}castRay(t,e,r,i,n,o,c,p,u,w){let _=h.intoRaw(r.origin),m=h.intoRaw(r.dir),b=Fe.fromRaw(e,this.raw.castRay(t.raw,e.raw,_,m,i,n,o,c,p,u,w));return _.free(),m.free(),b}castRayAndGetNormal(t,e,r,i,n,o,c,p,u,w){let _=h.intoRaw(r.origin),m=h.intoRaw(r.dir),b=Tt.fromRaw(e,this.raw.castRayAndGetNormal(t.raw,e.raw,_,m,i,n,o,c,p,u,w));return _.free(),m.free(),b}intersectionsWithRay(t,e,r,i,n,o,c,p,u,w,_){let m=h.intoRaw(r.origin),b=h.intoRaw(r.dir),x=k=>o(Tt.fromRaw(e,k));this.raw.intersectionsWithRay(t.raw,e.raw,m,b,i,n,x,c,p,u,w,_),m.free(),b.free()}intersectionWithShape(t,e,r,i,n,o,c,p,u,w){let _=h.intoRaw(r),m=g.intoRaw(i),b=n.intoRaw(),x=this.raw.intersectionWithShape(t.raw,e.raw,_,m,b,o,c,p,u,w);return _.free(),m.free(),b.free(),x}projectPoint(t,e,r,i,n,o,c,p,u){let w=h.intoRaw(r),_=At.fromRaw(e,this.raw.projectPoint(t.raw,e.raw,w,i,n,o,c,p,u));return w.free(),_}projectPointAndGetFeature(t,e,r,i,n,o,c,p){let u=h.intoRaw(r),w=At.fromRaw(e,this.raw.projectPointAndGetFeature(t.raw,e.raw,u,i,n,o,c,p));return u.free(),w}intersectionsWithPoint(t,e,r,i,n,o,c,p,u){let w=h.intoRaw(r);this.raw.intersectionsWithPoint(t.raw,e.raw,w,i,n,o,c,p,u),w.free()}castShape(t,e,r,i,n,o,c,p,u,w,_,m,b){let x=h.intoRaw(r),k=g.intoRaw(i),W=h.intoRaw(n),U=o.intoRaw(),rt=Bt.fromRaw(e,this.raw.castShape(t.raw,e.raw,x,k,W,U,c,p,u,w,_,m,b));return x.free(),k.free(),W.free(),U.free(),rt}intersectionsWithShape(t,e,r,i,n,o,c,p,u,w,_){let m=h.intoRaw(r),b=g.intoRaw(i),x=n.intoRaw();this.raw.intersectionsWithShape(t.raw,e.raw,m,b,x,o,c,p,u,w,_),m.free(),b.free(),x.free()}collidersWithAabbIntersectingAabb(t,e,r){let i=h.intoRaw(t),n=h.intoRaw(e);this.raw.collidersWithAabbIntersectingAabb(i,n,r),i.free(),n.free()}},Nt=class{constructor(t){this.raw=t||new ee}free(){this.raw&&this.raw.free(),this.raw=void 0}serializeAll(t,e,r,i,n,o,c,p,u){let w=h.intoRaw(t);const _=this.raw.serializeAll(w,e.raw,r.raw,i.raw,n.raw,o.raw,c.raw,p.raw,u.raw);return w.free(),_}deserializeAll(t){return Oe.fromRaw(this.raw.deserializeAll(t))}},fe=class{constructor(t,e){this.vertices=t,this.colors=e}},me=class{constructor(t){this.raw=t||new qt}free(){this.raw&&this.raw.free(),this.raw=void 0,this.vertices=void 0,this.colors=void 0}render(t,e,r,i,n){this.raw.render(t.raw,e.raw,r.raw,i.raw,n.raw),this.vertices=this.raw.vertices(),this.colors=this.raw.colors()}},we=class{},Ce=class{constructor(t,e,r,i,n){this.params=e,this.bodies=r,this.colliders=i,this.queries=n,this.raw=new Kt(t),this.rawCharacterCollision=new pt,this._applyImpulsesToDynamicBodies=!1,this._characterMass=null}free(){this.raw&&(this.raw.free(),this.rawCharacterCollision.free()),this.raw=void 0,this.rawCharacterCollision=void 0}up(){return this.raw.up()}setUp(t){let e=h.intoRaw(t);return this.raw.setUp(e)}applyImpulsesToDynamicBodies(){return this._applyImpulsesToDynamicBodies}setApplyImpulsesToDynamicBodies(t){this._applyImpulsesToDynamicBodies=t}characterMass(){return this._characterMass}setCharacterMass(t){this._characterMass=t}offset(){return this.raw.offset()}setOffset(t){this.raw.setOffset(t)}slideEnabled(){return this.raw.slideEnabled()}setSlideEnabled(t){this.raw.setSlideEnabled(t)}autostepMaxHeight(){return this.raw.autostepMaxHeight()}autostepMinWidth(){return this.raw.autostepMinWidth()}autostepIncludesDynamicBodies(){return this.raw.autostepIncludesDynamicBodies()}autostepEnabled(){return this.raw.autostepEnabled()}enableAutostep(t,e,r){this.raw.enableAutostep(t,e,r)}disableAutostep(){return this.raw.disableAutostep()}maxSlopeClimbAngle(){return this.raw.maxSlopeClimbAngle()}setMaxSlopeClimbAngle(t){this.raw.setMaxSlopeClimbAngle(t)}minSlopeSlideAngle(){return this.raw.minSlopeSlideAngle()}setMinSlopeSlideAngle(t){this.raw.setMinSlopeSlideAngle(t)}snapToGroundDistance(){return this.raw.snapToGroundDistance()}enableSnapToGround(t){this.raw.enableSnapToGround(t)}disableSnapToGround(){this.raw.disableSnapToGround()}snapToGroundEnabled(){return this.raw.snapToGroundEnabled()}computeColliderMovement(t,e,r,i,n){let o=h.intoRaw(e);this.raw.computeColliderMovement(this.params.dt,this.bodies.raw,this.colliders.raw,this.queries.raw,t.handle,o,this._applyImpulsesToDynamicBodies,this._characterMass,r,i,this.colliders.castClosure(n)),o.free()}computedMovement(){return h.fromRaw(this.raw.computedMovement())}computedGrounded(){return this.raw.computedGrounded()}numComputedCollisions(){return this.raw.numComputedCollisions()}computedCollision(t,e){if(this.raw.computedCollision(t,this.rawCharacterCollision)){let r=this.rawCharacterCollision;return e=e??new we,e.translationApplied=h.fromRaw(r.translationApplied()),e.translationRemaining=h.fromRaw(r.translationRemaining()),e.toi=r.toi(),e.witness1=h.fromRaw(r.worldWitness1()),e.witness2=h.fromRaw(r.worldWitness2()),e.normal1=h.fromRaw(r.worldNormal1()),e.normal2=h.fromRaw(r.worldNormal2()),e.collider=this.colliders.get(r.handle()),e}else return null}},Oe=class Nr{constructor(t,e,r,i,n,o,c,p,u,w,_,m,b,x){this.gravity=t,this.integrationParameters=new Se(e),this.islands=new ve(r),this.broadPhase=new pe(i),this.narrowPhase=new Ie(n),this.bodies=new ze(o),this.colliders=new _e(c),this.impulseJoints=new Re(p),this.multibodyJoints=new Ee(u),this.ccdSolver=new ue(w),this.queryPipeline=new je(_),this.physicsPipeline=new xe(m),this.serializationPipeline=new Nt(b),this.debugRenderPipeline=new me(x),this.characterControllers=new Set,this.impulseJoints.finalizeDeserialization(this.bodies),this.bodies.finalizeDeserialization(this.colliders),this.colliders.finalizeDeserialization(this.bodies)}free(){this.integrationParameters.free(),this.islands.free(),this.broadPhase.free(),this.narrowPhase.free(),this.bodies.free(),this.colliders.free(),this.impulseJoints.free(),this.multibodyJoints.free(),this.ccdSolver.free(),this.queryPipeline.free(),this.physicsPipeline.free(),this.serializationPipeline.free(),this.debugRenderPipeline.free(),this.characterControllers.forEach(t=>t.free()),this.integrationParameters=void 0,this.islands=void 0,this.broadPhase=void 0,this.narrowPhase=void 0,this.bodies=void 0,this.colliders=void 0,this.ccdSolver=void 0,this.impulseJoints=void 0,this.multibodyJoints=void 0,this.queryPipeline=void 0,this.physicsPipeline=void 0,this.serializationPipeline=void 0,this.debugRenderPipeline=void 0,this.characterControllers=void 0}static fromRaw(t){return t?new Nr(h.fromRaw(t.takeGravity()),t.takeIntegrationParameters(),t.takeIslandManager(),t.takeBroadPhase(),t.takeNarrowPhase(),t.takeBodies(),t.takeColliders(),t.takeImpulseJoints(),t.takeMultibodyJoints()):null}takeSnapshot(){return this.serializationPipeline.serializeAll(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints)}static restoreSnapshot(t){return new Nt().deserializeAll(t)}debugRender(){return this.debugRenderPipeline.render(this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.narrowPhase),new fe(this.debugRenderPipeline.vertices,this.debugRenderPipeline.colors)}step(t,e){this.physicsPipeline.step(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.ccdSolver,t,e),this.queryPipeline.update(this.bodies,this.colliders)}propagateModifiedBodyPositionsToColliders(){this.bodies.raw.propagateModifiedBodyPositionsToColliders(this.colliders.raw)}updateSceneQueries(){this.propagateModifiedBodyPositionsToColliders(),this.queryPipeline.update(this.bodies,this.colliders)}get timestep(){return this.integrationParameters.dt}set timestep(t){this.integrationParameters.dt=t}get maxVelocityIterations(){return this.integrationParameters.maxVelocityIterations}set maxVelocityIterations(t){this.integrationParameters.maxVelocityIterations=t}get maxVelocityFrictionIterations(){return this.integrationParameters.maxVelocityFrictionIterations}set maxVelocityFrictionIterations(t){this.integrationParameters.maxVelocityFrictionIterations=t}get maxStabilizationIterations(){return this.integrationParameters.maxStabilizationIterations}set maxStabilizationIterations(t){this.integrationParameters.maxStabilizationIterations=t}createRigidBody(t){return this.bodies.createRigidBody(this.colliders,t)}createCharacterController(t){let e=new Ce(t,this.integrationParameters,this.bodies,this.colliders,this.queryPipeline);return this.characterControllers.add(e),e}removeCharacterController(t){this.characterControllers.delete(t),t.free()}createCollider(t,e){let r=e?e.handle:void 0;return this.colliders.createCollider(this.bodies,t,r)}createImpulseJoint(t,e,r,i){return this.impulseJoints.createJoint(this.bodies,t,e.handle,r.handle,i)}createMultibodyJoint(t,e,r,i){return this.multibodyJoints.createJoint(t,e.handle,r.handle,i)}getRigidBody(t){return this.bodies.get(t)}getCollider(t){return this.colliders.get(t)}getImpulseJoint(t){return this.impulseJoints.get(t)}getMultibodyJoint(t){return this.multibodyJoints.get(t)}removeRigidBody(t){this.bodies&&this.bodies.remove(t.handle,this.islands,this.colliders,this.impulseJoints,this.multibodyJoints)}removeCollider(t,e){this.colliders&&this.colliders.remove(t.handle,this.islands,this.bodies,e)}removeImpulseJoint(t,e){this.impulseJoints&&this.impulseJoints.remove(t.handle,e)}removeMultibodyJoint(t,e){this.impulseJoints&&this.multibodyJoints.remove(t.handle,e)}forEachCollider(t){this.colliders.forEach(t)}forEachRigidBody(t){this.bodies.forEach(t)}forEachActiveRigidBody(t){this.bodies.forEachActiveRigidBody(this.islands,t)}castRay(t,e,r,i,n,o,c,p){return this.queryPipeline.castRay(this.bodies,this.colliders,t,e,r,i,n,o?o.handle:null,c?c.handle:null,this.colliders.castClosure(p))}castRayAndGetNormal(t,e,r,i,n,o,c,p){return this.queryPipeline.castRayAndGetNormal(this.bodies,this.colliders,t,e,r,i,n,o?o.handle:null,c?c.handle:null,this.colliders.castClosure(p))}intersectionsWithRay(t,e,r,i,n,o,c,p,u){this.queryPipeline.intersectionsWithRay(this.bodies,this.colliders,t,e,r,i,n,o,c?c.handle:null,p?p.handle:null,this.colliders.castClosure(u))}intersectionWithShape(t,e,r,i,n,o,c,p){let u=this.queryPipeline.intersectionWithShape(this.bodies,this.colliders,t,e,r,i,n,o?o.handle:null,c?c.handle:null,this.colliders.castClosure(p));return u!=null?this.colliders.get(u):null}projectPoint(t,e,r,i,n,o,c){return this.queryPipeline.projectPoint(this.bodies,this.colliders,t,e,r,i,n?n.handle:null,o?o.handle:null,this.colliders.castClosure(c))}projectPointAndGetFeature(t,e,r,i,n,o){return this.queryPipeline.projectPointAndGetFeature(this.bodies,this.colliders,t,e,r,i?i.handle:null,n?n.handle:null,this.colliders.castClosure(o))}intersectionsWithPoint(t,e,r,i,n,o,c){this.queryPipeline.intersectionsWithPoint(this.bodies,this.colliders,t,this.colliders.castClosure(e),r,i,n?n.handle:null,o?o.handle:null,this.colliders.castClosure(c))}castShape(t,e,r,i,n,o,c,p,u,w,_){return this.queryPipeline.castShape(this.bodies,this.colliders,t,e,r,i,n,o,c,p,u?u.handle:null,w?w.handle:null,this.colliders.castClosure(_))}intersectionsWithShape(t,e,r,i,n,o,c,p,u){this.queryPipeline.intersectionsWithShape(this.bodies,this.colliders,t,e,r,this.colliders.castClosure(i),n,o,c?c.handle:null,p?p.handle:null,this.colliders.castClosure(u))}collidersWithAabbIntersectingAabb(t,e,r){this.queryPipeline.collidersWithAabbIntersectingAabb(t,e,this.colliders.castClosure(r))}contactsWith(t,e){this.narrowPhase.contactsWith(t.handle,this.colliders.castClosure(e))}intersectionsWith(t,e){this.narrowPhase.intersectionsWith(t.handle,this.colliders.castClosure(e))}contactPair(t,e,r){this.narrowPhase.contactPair(t.handle,e.handle,r)}intersectionPair(t,e){return this.narrowPhase.intersectionPair(t.handle,e.handle)}},function(a){a[a.COLLISION_EVENTS=1]="COLLISION_EVENTS",a[a.CONTACT_FORCE_EVENTS=2]="CONTACT_FORCE_EVENTS"}(he||(he={})),ke=class{free(){this.raw&&this.raw.free(),this.raw=void 0}collider1(){return this.raw.collider1()}collider2(){return this.raw.collider2()}totalForce(){return h.fromRaw(this.raw.total_force())}totalForceMagnitude(){return this.raw.total_force_magnitude()}maxForceDirection(){return h.fromRaw(this.raw.max_force_direction())}maxForceMagnitude(){return this.raw.max_force_magnitude()}},hr=class{constructor(t,e){this.raw=e||new ut(t)}free(){this.raw&&this.raw.free(),this.raw=void 0}drainCollisionEvents(t){this.raw.drainCollisionEvents(t)}drainContactForceEvents(t){let e=new ke;this.raw.drainContactForceEvents(r=>{e.raw=r,t(e),e.free()})}clear(){this.raw.clear()}},function(a){a[a.FILTER_CONTACT_PAIRS=1]="FILTER_CONTACT_PAIRS",a[a.FILTER_INTERSECTION_PAIRS=2]="FILTER_INTERSECTION_PAIRS"}(de||(de={})),function(a){a[a.EMPTY=0]="EMPTY",a[a.COMPUTE_IMPULSE=1]="COMPUTE_IMPULSE"}(Ne||(Ne={})),wr=function(){return Or()},Er=Object.freeze(Object.defineProperty({__proto__:null,get ActiveCollisionTypes(){return mt},get ActiveEvents(){return he},get ActiveHooks(){return de},Ball:yt,BroadPhase:pe,CCDSolver:ue,Capsule:bt,CharacterCollision:we,get CoefficientCombineRule(){return at},Collider:gt,ColliderDesc:cr,ColliderSet:_e,Cone:Rt,ConvexPolyhedron:ot,Cuboid:St,Cylinder:vt,DebugRenderBuffers:fe,DebugRenderPipeline:me,EventQueue:hr,get FeatureType(){return it},FixedImpulseJoint:ye,FixedMultibodyJoint:be,HalfSpace:ge,Heightfield:Ct,ImpulseJoint:Q,ImpulseJointSet:Re,IntegrationParameters:Se,IslandManager:ve,JointData:dr,get JointType(){return H},KinematicCharacterController:Ce,get MassPropsMode(){return Z},get MotorModel(){return Ae},MultibodyJoint:$,MultibodyJointSet:Ee,NarrowPhase:Ie,PhysicsPipeline:xe,PointColliderProjection:At,PointProjection:Et,Polyline:It,PrismaticImpulseJoint:Te,PrismaticMultibodyJoint:Pe,Quaternion:xt,get QueryFilterFlags(){return Me},QueryPipeline:je,Ray:pr,RayColliderIntersection:Tt,RayColliderToi:Fe,RayIntersection:Pt,RevoluteImpulseJoint:He,RevoluteMultibodyJoint:De,RigidBody:Mt,RigidBodyDesc:ur,RigidBodySet:ze,get RigidBodyType(){return B},RotationOps:g,RoundCone:jt,RoundConvexPolyhedron:lt,RoundCuboid:Ft,RoundCylinder:Ht,RoundTriangle:Dt,Segment:zt,SerializationPipeline:Nt,Shape:j,ShapeColliderTOI:Bt,ShapeContact:ct,ShapeTOI:ht,get ShapeType(){return R},get SolverFlags(){return Ne},SphericalImpulseJoint:Be,SphericalMultibodyJoint:Le,TempContactForceEvent:ke,TempContactManifold:Je,TriMesh:Lt,Triangle:kt,UnitImpulseJoint:Jt,UnitMultibodyJoint:Gt,Vector3:Ge,VectorOps:h,World:Oe,version:wr},Symbol.toStringTag,{value:"Module"}))})();export{mt as ActiveCollisionTypes,he as ActiveEvents,de as ActiveHooks,yt as Ball,pe as BroadPhase,ue as CCDSolver,bt as Capsule,we as CharacterCollision,at as CoefficientCombineRule,gt as Collider,cr as ColliderDesc,_e as ColliderSet,Rt as Cone,ot as ConvexPolyhedron,St as Cuboid,vt as Cylinder,fe as DebugRenderBuffers,me as DebugRenderPipeline,hr as EventQueue,it as FeatureType,ye as FixedImpulseJoint,be as FixedMultibodyJoint,ge as HalfSpace,Ct as Heightfield,Q as ImpulseJoint,Re as ImpulseJointSet,Se as IntegrationParameters,ve as IslandManager,dr as JointData,H as JointType,Ce as KinematicCharacterController,Z as MassPropsMode,Ae as MotorModel,$ as MultibodyJoint,Ee as MultibodyJointSet,Ie as NarrowPhase,xe as PhysicsPipeline,At as PointColliderProjection,Et as PointProjection,It as Polyline,Te as PrismaticImpulseJoint,Pe as PrismaticMultibodyJoint,xt as Quaternion,Me as QueryFilterFlags,je as QueryPipeline,pr as Ray,Tt as RayColliderIntersection,Fe as RayColliderToi,Pt as RayIntersection,He as RevoluteImpulseJoint,De as RevoluteMultibodyJoint,Mt as RigidBody,ur as RigidBodyDesc,ze as RigidBodySet,B as RigidBodyType,g as RotationOps,jt as RoundCone,lt as RoundConvexPolyhedron,Ft as RoundCuboid,Ht as RoundCylinder,Dt as RoundTriangle,zt as Segment,Nt as SerializationPipeline,j as Shape,Bt as ShapeColliderTOI,ct as ShapeContact,ht as ShapeTOI,R as ShapeType,Ne as SolverFlags,Be as SphericalImpulseJoint,Le as SphericalMultibodyJoint,ke as TempContactForceEvent,Je as TempContactManifold,Lt as TriMesh,kt as Triangle,Jt as UnitImpulseJoint,Gt as UnitMultibodyJoint,Ge as Vector3,h as VectorOps,Oe as World,mh as __tla,Er as default,wr as version};
